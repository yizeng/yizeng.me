<!DOCTYPE html> <!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]--> <!--[if IE 7]><html class="no-js lt-ie9 lt-ie8"><![endif]--> <!--[if IE 8]><html class="no-js lt-ie9"><![endif]--> <!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]--> <head> <meta charset="utf-8"> <!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><![endif]--> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Create a custom Jekyll 404 page | Yi Zeng’s Blog</title> <meta name="generator" content="Jekyll v3.9.3"/> <meta property="og:title" content="Create a custom Jekyll 404 page"/> <meta name="author" content="Yi Zeng"/> <meta property="og:locale" content="en"/> <meta name="description" content="How to create a custom Jekyll 404 page for sites hosted on GitHub Pages, which can redirect to homepage automatically after a timeout using HTML meta tag."/> <meta property="og:description" content="How to create a custom Jekyll 404 page for sites hosted on GitHub Pages, which can redirect to homepage automatically after a timeout using HTML meta tag."/> <link rel="canonical" href="http://yizeng.me/2013/05/26/create-a-custom-jekyll-404-page/"/> <meta property="og:url" content="http://yizeng.me/2013/05/26/create-a-custom-jekyll-404-page/"/> <meta property="og:site_name" content="Yi Zeng’s Blog"/> <meta property="og:type" content="article"/> <meta property="article:published_time" content="2013-05-26T00:00:00+02:00"/> <meta name="twitter:card" content="summary"/> <meta property="twitter:title" content="Create a custom Jekyll 404 page"/> <script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Yi Zeng"},"dateModified":"2013-05-26T00:00:00+02:00","datePublished":"2013-05-26T00:00:00+02:00","description":"How to create a custom Jekyll 404 page for sites hosted on GitHub Pages, which can redirect to homepage automatically after a timeout using HTML meta tag.","headline":"Create a custom Jekyll 404 page","mainEntityOfPage":{"@type":"WebPage","@id":"http://yizeng.me/2013/05/26/create-a-custom-jekyll-404-page/"},"url":"http://yizeng.me/2013/05/26/create-a-custom-jekyll-404-page/"}</script> <meta name="keywords" content="jekyll,github"/> <link type="application/atom+xml" rel="alternate" href="http://yizeng.me/feed.xml" title="Yi Zeng’s Blog"/> <link href='/assets/stylesheets/blog.css' rel="stylesheet" type="text/css"> <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script> <script>window.Modernizr||document.write('<script src="/assets/javascripts/modernizr-2.8.3.min.js"><\/script>');</script> <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> <script>window.jQuery||document.write('<script src="/assets/javascripts/jquery-3.3.1.min.js"><\/script>');</script> <script src="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script> <script>window.Pace||document.write('<script src="/assets/javascripts/pace.min.js"><\/script>');</script> <script>(function(b,m,h,a,g){b[a]=b[a]||[];b[a].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var k=m.getElementsByTagName(h)[0],e=m.createElement(h),c=a!="dataLayer"?"&l="+a:"";e.async=true;e.src="https://www.googletagmanager.com/gtm.js?id="+g+c;k.parentNode.insertBefore(e,k)})(window,document,"script","dataLayer","GTM-P5NFP45");</script> </head> <body> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P5NFP45" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> <!--[if IE]><p class="site-notice">You are using an outdated browser. Please <a href="http://browsehappy.com/" target="_blank">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true" target="_blank">activate Google Chrome Frame</a> to improve your experience.</p><![endif]--> <noscript> <p class="site-notice">This site requires JavaScript. Here are the instructions <a href="http://www.enable-javascript.com/" target="_blank">how to enable JavaScript in your web browser</a>.</p> </noscript> <div class="nav-wrapper overlay-wrapper"> <div class="nav-form overlay-form"> <span class="overlay-header menu">Menu</span> <a class="btn-close">Close</a> <div class="results"> <ul> <li><a href="/blog/categories/">Categories</a></li> <li><a href="/blog/tags/">Tags</a></li> <li><a href="/">About</a></li> </ul> </div> </div> </div> <div class="search-wrapper overlay-wrapper"> <div class="search-form overlay-form"> <input type="text" class="overlay-header search-field" placeholder="Search..."> <a class="btn-close">Close</a> <ul class="results"></ul> </div> </div> <div id="page" class="hentry"> <header class="the-header"> <div class="unit-head"> <div class="unit-inner unit-head-inner"> <nav class="nav-global"> <ul> <li class="logo nav-link"> <button class="btn-menu" title="Menu"></button> <a href="/blog/">Yi Zeng’s Blog</a> <!--[if !IE]>--> <button class="btn-search" title="Search"></button> <!--<![endif]--> </li> <li class="nav-link"><a title="Categories" href="/blog/categories/">Categories</a></li> <li class="nav-link"><a title="Tags" href="/blog/tags/">Tags</a></li> <!--[if !IE]>--> <li class="nav-link"><a title="Search" class="btn-search" href="#">Search</a></li> <!--<![endif]--> </ul> </nav> </div> </div> </header> <div class="body animated fadeInDown" role="main"> <div class="unit-body"> <div class="unit-inner unit-body-inner"> <div class="entry-content"> <article class="unit-article layout-post"> <div class="unit-inner unit-article-inner"> <div itemscope itemtype="http://schema.org/Article" class="content"> <header> <div class="unit-head"> <div class="unit-inner unit-head-inner"> <h1 class="entry-title" itemprop="name">Create a custom Jekyll 404 page</h1> </div> </div> </header> <div class="bd article-content"> <div class="entry-content"> <div class="meta"> <p class="date-publish"> Published: <time itemprop="datePublished" class="date-pub " title="2013-05-26T00:00:00+02:00" datetime="2013-05-26T00:00:00+02:00">May 26, 2013 </time> by <a class="author" href="/" rel="author" title="Show Author"> <span itemprop="author" itemscope itemtype="http://schema.org/Person"> <span itemprop="name">Yi Zeng</span> </span> </a> <a class="license-icon" rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" title="Show License"> <img alt="Creative Commons Licence" style="border-width:0" src="/assets/images/theme/cc-by-sa.png" height="16" width="80"/> </a> (Last updated: <time class="date-updated updated" title="2014-03-18T00:00:00+01:00" datetime="2014-03-18T00:00:00+01:00">March 18, 2014</time>) </p> <ul class="list-category list-linear"> <li class="list-head">Categories: </li> <li> <a href="/blog/categories/#tutorials" title="tutorials"> tutorials <span>26</span></a> </li> </ul> <ul class="list-tag list-linear"> <li class="list-head">Tags: </li> <li> <a href="/blog/tags/#github" title="github">github <span>2</span></a> </li> <li> <a href="/blog/tags/#jekyll" title="jekyll">jekyll <span>5</span></a> </li> </ul> </div> <div itemprop="articleBody"> <p>This article demonstrates how to create a custom Jekyll 404 page for Jekyll sites hosted on <a href="http://pages.github.com/">GitHub Page</a>.</p> <p>Things might be different if sites are hosted by other providers. Also it's worth noting that custom 404 pages will only be functioning on custom domain sites. For more detailed GitHub Pages official documentation, please see <a href="https://help.github.com/articles/custom-404-pages">Custom 404 Pages - GitHub Help</a>.</p> <ul class="toc" id="markdown-toc"> <li><a href="#heading-create-404html-file" id="markdown-toc-heading-create-404html-file">Create 404.html file</a></li> <li><a href="#heading-add-yaml-front-matter" id="markdown-toc-heading-add-yaml-front-matter">Add YAML Front Matter</a></li> <li><a href="#heading-add-404-content" id="markdown-toc-heading-add-404-content">Add 404 content</a></li> <li><a href="#heading-redirect-404-page-automatically" id="markdown-toc-heading-redirect-404-page-automatically">Redirect 404 page automatically</a></li> <li><a href="#heading-test-404-page" id="markdown-toc-heading-test-404-page">Test 404 page</a></li> </ul> <h2 id="heading-create-404html-file">Create 404.html file</h2> <p>Create <code class="language-plaintext highlighter-rouge">404.html</code> in the root directory of Jekyll site, <del>which has to be an HTML file</del><sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup>.</p> <h2 id="heading-add-yaml-front-matter">Add YAML Front Matter</h2> <p>The goal here is to create a custom 404 page like all other pages using the same Jekyll theme, without creating a separately designed 404.html. Therefore, add <a href="http://jekyllrb.com/docs/frontmatter/">YAML Front Matter</a> section to the top of the 404.html and set the layout to be "page".</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: page
title: 404
---
</code></pre></div></div> <h2 id="heading-add-404-content">Add 404 content</h2> <p>Add the actual 404 content after the <a href="http://jekyllrb.com/docs/frontmatter/">YAML Front Matter</a> section.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: page
title: 404
---
&lt;p&gt;Sorry this page does not exist =(&lt;/p&gt;
</code></pre></div></div> <h2 id="heading-redirect-404-page-automatically">Redirect 404 page automatically</h2> <p>In order to redirect 404 page automatically, the easiest way might be using HTML meta tag, <code class="language-plaintext highlighter-rouge">meta http-equiv="refresh"</code>.</p> <ol> <li> <p>Add a <code class="language-plaintext highlighter-rouge">&lt;meta&gt;</code> tag in the <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code> into Jekyll's <code class="language-plaintext highlighter-rouge">default.html</code> (e.g. mine resides in /_includes/themes/THEME_NAME/default.html)<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup>.</p> </li> <li> <p>Set the meta tag's <code class="language-plaintext highlighter-rouge">http-equiv</code> attribute to "refresh", i.e <code class="language-plaintext highlighter-rouge">&lt;meta http-equiv="refresh"&gt;</code>.</p> </li> <li>Set meta tag's content attribute to something similar to <code class="language-plaintext highlighter-rouge">content="5; url=/"</code>. <ul> <li><code class="language-plaintext highlighter-rouge">5</code> is the number of seconds to wait before automatically redirecting. Setting to <code class="language-plaintext highlighter-rouge">0</code> means immediate redirecting.</li> <li><code class="language-plaintext highlighter-rouge">url=/</code> sets the URL to be redirected to, which can also be set to any URLs like <code class="language-plaintext highlighter-rouge">url=http://yizeng.me</code> etc.</li> </ul> </li> <li>Use <a href="https://help.shopify.com/themes/liquid/basics/operators#basic-operators">Liquid's if-else</a> statement to ensure the auto-redirecting happens to <code class="language-plaintext highlighter-rouge">404.html</code> only. <script src="https://gist.github.com/yizeng/a4f26459bc8795476ed4.js"></script></li> </ol> <p>Here is a completed example of <code class="language-plaintext highlighter-rouge">default.html</code>: <script src="https://gist.github.com/yizeng/5428d29c3d5af224475b.js"></script></p> <h2 id="heading-test-404-page">Test 404 page</h2> <ol> <li> <p>Build Jekyll server locally using <code class="language-plaintext highlighter-rouge">jekyll serve</code>, then go to URL <code class="language-plaintext highlighter-rouge">localhost:4000/404.html</code>, see if the custom 404 page works or not.</p> </li> <li> <p>Push to GitHub if everything looks fine.</p> </li> <li> <p>Go to the live site using the custom domain with a nonexistence URL, e.g. http://yizeng.me/go_404, see how the page looks and check if it can be redirected automatically or not.</p> </li> </ol> <div class="footnotes" role="doc-endnotes"> <ol> <li id="fn:1" role="doc-endnote"> <p>This statement no longer exists in official documentation, but I haven't had a chance to verify it. <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> <li id="fn:2" role="doc-endnote"> <p><a href="http://www.w3schools.com/tags/att_meta_http_equiv.asp">"HTML &lt;meta&gt; http-equiv Attribute" example</a> by W3schools. <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> </ol> </div> </div> </div> </div> <footer class="unit-foot"> <div class="unit-inner unit-foot-inner"> <div class="post-buttons"> <a class="internal gotop" href="#page" title="Back to Top">Back to Top</a> <div class="addthis_toolbox addthis_default_style addthis_32x32_style"> <small class="label">Share Post:</small> <a class="btn-share-post addthis_button_email"></a> <a class="btn-share-post addthis_button_facebook"></a> <a class="btn-share-post addthis_button_google_plusone_share"></a> <a class="btn-share-post addthis_button_reddit"></a> <a class="btn-share-post addthis_button_twitter"></a> </div> <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-53819e27689934f9"></script> </div> <nav class="pagination"> <a class="internal" rel="prev" href="/2013/05/19/use-_netrc-to-avoid-tortoisegit-asking-for-username-and-password/" title=" 'Use netrc to avoid TortoiseGit asking for username and password'"> ← Use netrc to avoid TortoiseGit asking for username and password</a> <a class="internal" rel="next" href="/2013/06/15/setup-a-selenium-webdriver-ruby-project-on-travis-ci/" title="Next Post 'Setup a Selenium WebDriver Ruby project on Travis CI'">Setup a Selenium WebDriver Ruby project on Travis CI → </a> </nav> </div> </footer> <div class="misc-content"> <script>$(document).ready(function(){var b="ULZ0b9TFdfCUJSKQd4WCKv2v3u25YoG7YG8zXPewkWrT35lZ0Se9YnxLzoV6VM8W";var c="yizeng";var a="link:"+$(".comments .show-hidden").attr("data-disqus-url");$.ajax({type:"GET",url:"//disqus.com/api/3.0/threads/set.jsonp",data:{api_key:b,forum:c,thread:a},cache:false,dataType:"jsonp",success:function(d){if(d.response.length===1){btnText="Show Comments ("+d.response[0].posts+")";$(".comments .show-hidden").html(btnText)}}});$(".comments .show-hidden").on("click",function(){$.ajaxSetup({cache:true});$.getScript("//"+c+".disqus.com/embed.js");$.ajaxSetup({cache:false});$(this).remove()});if(/\#comments/.test(location.hash)){$(".comments .show-hidden").trigger("click")}});</script> <div class="comments"> <button class="center-block show-hidden" title="Show Comments" data-disqus-url="http://yizeng.me/2013/05/26/create-a-custom-jekyll-404-page/">Show Comments</button> <div id="disqus_thread"></div> </div> </div> </div> </div> </article> </div> </div> </div> </div> <footer class="the-footer"> <div class="unit-foot"> <div class="unit-inner unit-foot-inner"> <div class="misc vcard"> <div class="about"> <h4><a href="/">About</a></h4> <p>Yi Zeng, a senior software engineer based in Berlin, Germany.</p> <p><small>Theme <a href="https://github.com/yizeng/jekyll-theme-simple-texture" target="_blank">Simple Texture</a> developed by <a href="http://yizeng.me" target="_blank">Yi Zeng</a>, powered by <a href="https://jekyllrb.com/" target="_blank">Jekyll</a>.</small></p> </div> <div class="social-links"> <a class="ico-rss" href="/feed.xml" rel="me" target="_blank" title="feed"></a> <a class="ico-github" href="https://github.com/yizeng/" rel="me" target="_blank" title="github"></a> <a class="ico-linkedin" href="https://www.linkedin.com/in/yizengnz/" rel="me" target="_blank" title="linkedin"></a> <a class="ico-stackoverflow" href="https://stackoverflow.com/users/1177636/yi-zeng" rel="me" target="_blank" title="stackoverflow"></a> </div> </div> </div> </div> <a href="#" class="internal back-to-top">Back to Top</a> </footer> </div> <script>$(document).ready(function(){var c=50,b=500,a=960;$(window).scroll(function(){if($(window).width()>a){if($(this).scrollTop()>c){$("footer").css("top","20px");$("footer .back-to-top").fadeIn(b)}else{$("footer").css("top","auto");$("footer .back-to-top").fadeOut(b)}}});$(window).resize(function(){if($(window).width()<a){$("footer").css("top","auto");$("footer .back-to-top").fadeOut(b)}if($(window).width()>=a&&$(this).scrollTop()>c){$("footer").css("top","20px");$("footer .back-to-top").fadeIn(b)}});$("footer .back-to-top, .gotop").on("click",function(d){d.preventDefault();$("html, body").animate({scrollTop:0},b);return false});$(".show-hidden").on("click",function(){$(this).parent().next().toggleClass("hidden");$(this).toggleClass("hidden")})});</script> <script src="/assets/javascripts/jekyll-search.jquery.js"></script> <script>$(document).ready(function(){$(".search-field").simpleJekyllSearch({jsonFile:"/search.json",template:'<li><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></li>',searchResults:".search-wrapper .results",searchResultsTitle:"<h4>Search results</h4>",noResults:"<p>Oh shucks<br/><small>Nothing found :(</small></p>"})});(function(c,b,d){var a=function(){c(".nav-wrapper, .search-wrapper").removeAttr("style");c(".nav-form, .search-form").removeClass("active");c("body").removeClass("nav-overlay search-overlay")};c(".nav-global .btn-search").on("click",function(){c(".search-wrapper").css({display:"block"});c(".search-form").addClass("active");c(".search-form").find("input").focus();c("body").addClass("search-overlay")});c(".nav-global .btn-menu").on("click",function(){c(".nav-wrapper").css({display:"block"});c(".nav-form").addClass("active");c(".nav-form .search-field").prop("disabled",true);c("body").addClass("nav-overlay")});c(".nav-wrapper .btn-close, .search-wrapper .btn-close").on("click",function(){a()});c(document).on("keyup",function(f){if(f.keyCode===27){a()}})})(jQuery,window);</script> <script src='//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.js'></script> <script src='//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-buttons.min.js'></script> <script src="/assets/javascripts/unveil/jquery.unveil.min.js"></script> <script>window.jQuery.fancybox||document.write('<script src="/assets/javascripts/fancybox/jquery.fancybox.pack.js?v=2.1.4"><\/script>');window.jQuery.fancybox.helpers.buttons||document.write('<script src="/assets/javascripts/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"><\/script>');</script> <script>$("head").append('<link rel="stylesheet" href="/assets/javascripts/fancybox/jquery.fancybox.css?v=2.1.4" type="text/css" />');$("head").append('<link rel="stylesheet" href="/assets/javascripts/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" />');$(".post-image").fancybox({prevEffect:"none",nextEffect:"none",closeBtn:true,helpers:{title:{type:"float"}}});$(document).ready(function(){$(".post-image > img").unveil(450)});</script> </body> </html>