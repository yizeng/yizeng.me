<!DOCTYPE html> <!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]--> <!--[if IE 7]><html class="no-js lt-ie9 lt-ie8"><![endif]--> <!--[if IE 8]><html class="no-js lt-ie9"><![endif]--> <!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]--> <head> <meta charset="utf-8"> <!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><![endif]--> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Tips for locating elements in Ext JS applications with Selenium WebDriver | Yi Zeng’s Blog</title> <meta name="generator" content="Jekyll v3.9.3"/> <meta property="og:title" content="Tips for locating elements in Ext JS applications with Selenium WebDriver"/> <meta name="author" content="Yi Zeng"/> <meta property="og:locale" content="en"/> <meta name="description" content="This article provides few tips for locating elements in ExtJS applications with Selenium WebDriver or similar frameworks."/> <meta property="og:description" content="This article provides few tips for locating elements in ExtJS applications with Selenium WebDriver or similar frameworks."/> <link rel="canonical" href="http://yizeng.me/2017/01/15/tips-for-locating-elements-in-ext-js-applications-with-selenium-webdriver/"/> <meta property="og:url" content="http://yizeng.me/2017/01/15/tips-for-locating-elements-in-ext-js-applications-with-selenium-webdriver/"/> <meta property="og:site_name" content="Yi Zeng’s Blog"/> <meta property="og:type" content="article"/> <meta property="article:published_time" content="2017-01-15T00:00:00+01:00"/> <meta name="twitter:card" content="summary"/> <meta property="twitter:title" content="Tips for locating elements in Ext JS applications with Selenium WebDriver"/> <script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Yi Zeng"},"dateModified":"2017-01-15T00:00:00+01:00","datePublished":"2017-01-15T00:00:00+01:00","description":"This article provides few tips for locating elements in ExtJS applications with Selenium WebDriver or similar frameworks.","headline":"Tips for locating elements in Ext JS applications with Selenium WebDriver","mainEntityOfPage":{"@type":"WebPage","@id":"http://yizeng.me/2017/01/15/tips-for-locating-elements-in-ext-js-applications-with-selenium-webdriver/"},"url":"http://yizeng.me/2017/01/15/tips-for-locating-elements-in-ext-js-applications-with-selenium-webdriver/"}</script> <meta name="keywords" content="css selectors,ext js,javascript,selenium webdriver,xpath"/> <link type="application/atom+xml" rel="alternate" href="http://yizeng.me/feed.xml" title="Yi Zeng’s Blog"/> <link href='/assets/stylesheets/blog.css' rel="stylesheet" type="text/css"> <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script> <script>window.Modernizr||document.write('<script src="/assets/javascripts/modernizr-2.8.3.min.js"><\/script>');</script> <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> <script>window.jQuery||document.write('<script src="/assets/javascripts/jquery-3.3.1.min.js"><\/script>');</script> <script src="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script> <script>window.Pace||document.write('<script src="/assets/javascripts/pace.min.js"><\/script>');</script> <script>(function(b,m,h,a,g){b[a]=b[a]||[];b[a].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var k=m.getElementsByTagName(h)[0],e=m.createElement(h),c=a!="dataLayer"?"&l="+a:"";e.async=true;e.src="https://www.googletagmanager.com/gtm.js?id="+g+c;k.parentNode.insertBefore(e,k)})(window,document,"script","dataLayer","GTM-P5NFP45");</script> </head> <body> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P5NFP45" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> <!--[if IE]><p class="site-notice">You are using an outdated browser. Please <a href="http://browsehappy.com/" target="_blank">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true" target="_blank">activate Google Chrome Frame</a> to improve your experience.</p><![endif]--> <noscript> <p class="site-notice">This site requires JavaScript. Here are the instructions <a href="http://www.enable-javascript.com/" target="_blank">how to enable JavaScript in your web browser</a>.</p> </noscript> <div class="nav-wrapper overlay-wrapper"> <div class="nav-form overlay-form"> <span class="overlay-header menu">Menu</span> <a class="btn-close">Close</a> <div class="results"> <ul> <li><a href="/blog/categories/">Categories</a></li> <li><a href="/blog/tags/">Tags</a></li> <li><a href="/">About</a></li> </ul> </div> </div> </div> <div class="search-wrapper overlay-wrapper"> <div class="search-form overlay-form"> <input type="text" class="overlay-header search-field" placeholder="Search..."> <a class="btn-close">Close</a> <ul class="results"></ul> </div> </div> <div id="page" class="hentry"> <header class="the-header"> <div class="unit-head"> <div class="unit-inner unit-head-inner"> <nav class="nav-global"> <ul> <li class="logo nav-link"> <button class="btn-menu" title="Menu"></button> <a href="/blog/">Yi Zeng’s Blog</a> <!--[if !IE]>--> <button class="btn-search" title="Search"></button> <!--<![endif]--> </li> <li class="nav-link"><a title="Categories" href="/blog/categories/">Categories</a></li> <li class="nav-link"><a title="Tags" href="/blog/tags/">Tags</a></li> <!--[if !IE]>--> <li class="nav-link"><a title="Search" class="btn-search" href="#">Search</a></li> <!--<![endif]--> </ul> </nav> </div> </div> </header> <div class="body animated fadeInDown" role="main"> <div class="unit-body"> <div class="unit-inner unit-body-inner"> <div class="entry-content"> <article class="unit-article layout-post"> <div class="unit-inner unit-article-inner"> <div itemscope itemtype="http://schema.org/Article" class="content"> <header> <div class="unit-head"> <div class="unit-inner unit-head-inner"> <h1 class="entry-title" itemprop="name">Tips for locating elements in Ext JS applications with Selenium WebDriver</h1> </div> </div> </header> <div class="bd article-content"> <div class="entry-content"> <div class="meta"> <p class="date-publish"> Published: <time itemprop="datePublished" class="date-pub updated" title="2017-01-15T00:00:00+01:00" datetime="2017-01-15T00:00:00+01:00">January 15, 2017 </time> by <a class="author" href="/" rel="author" title="Show Author"> <span itemprop="author" itemscope itemtype="http://schema.org/Person"> <span itemprop="name">Yi Zeng</span> </span> </a> <a class="license-icon" rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" title="Show License"> <img alt="Creative Commons Licence" style="border-width:0" src="/assets/images/theme/cc-by-sa.png" height="16" width="80"/> </a> </p> <ul class="list-category list-linear"> <li class="list-head">Categories: </li> <li> <a href="/blog/categories/#articles" title="articles"> articles <span>7</span></a> </li> </ul> <ul class="list-tag list-linear"> <li class="list-head">Tags: </li> <li> <a href="/blog/tags/#css-selectors" title="css selectors">css selectors <span>2</span></a> </li> <li> <a href="/blog/tags/#ext-js" title="ext js">ext js <span>1</span></a> </li> <li> <a href="/blog/tags/#javascript" title="javascript">javascript <span>4</span></a> </li> <li> <a href="/blog/tags/#selenium-webdriver" title="selenium webdriver">selenium webdriver <span>16</span></a> </li> <li> <a href="/blog/tags/#xpath" title="xpath">xpath <span>2</span></a> </li> </ul> </div> <div itemprop="articleBody"> <p>Locating elements in web applications created by <a href="https://www.sencha.com/products/extjs/#overview">Ext JS</a> framework could be a total nightmare for UI automators, as Ext JS generates one of the most complex DOM structures which have dynamic IDs with a large amount of duplicate class names.</p> <p>Unlike automating applications with simple DOM structures, Selenium WebDriver's built-in methods like <code class="language-plaintext highlighter-rouge">By.Id</code>, <code class="language-plaintext highlighter-rouge">By.ClassName</code>, <code class="language-plaintext highlighter-rouge">By.Name</code> would barely identify anything in Ext JS applications. In most of the cases, <code class="language-plaintext highlighter-rouge">By.CssSelector</code> or <code class="language-plaintext highlighter-rouge">By.XPath</code> will be neccessary, even though using them are not that straightforward either.</p> <p>Hopefully this article would help developers write the most concise meaningful and human readable locators, so that maintenance cost can be kept minimum when automating ExtJS applications.</p> <ul class="toc" id="markdown-toc"> <li><a href="#heading-ext-js-example" id="markdown-toc-heading-ext-js-example">Ext JS Example</a></li> <li><a href="#donts" id="markdown-toc-donts">DON'Ts</a> <ul> <li><a href="#heading-dont-match-only-ids" id="markdown-toc-heading-dont-match-only-ids">Don't match only IDs</a></li> <li><a href="#heading-dont-use-highly-position-dependent-xpaths" id="markdown-toc-heading-dont-use-highly-position-dependent-xpaths">Don't use highly position-dependent XPaths</a></li> <li><a href="#heading-dont-match-single-class-name-only" id="markdown-toc-heading-dont-match-single-class-name-only">Don't match single class name only</a></li> <li><a href="#heading-dont-perform-exact-match-on-multiple-classes" id="markdown-toc-heading-dont-perform-exact-match-on-multiple-classes">Don't perform exact match on multiple classes</a></li> <li><a href="#heading-dont-use-tools-to-generate-locators" id="markdown-toc-heading-dont-use-tools-to-generate-locators">Don't use tools to generate locators</a></li> </ul> </li> <li><a href="#heading-dos" id="markdown-toc-heading-dos">DOs</a> <ul> <li><a href="#heading-use-meaningful-class-names" id="markdown-toc-heading-use-meaningful-class-names">Use meaningful class names</a></li> <li><a href="#heading-use-unique-attributes" id="markdown-toc-heading-use-unique-attributes">Use unique attributes</a></li> <li><a href="#heading-find-a-unique-ancestor" id="markdown-toc-heading-find-a-unique-ancestor">Find a unique ancestor</a></li> </ul> </li> <li><a href="#heading-gotchas" id="markdown-toc-heading-gotchas">Gotchas</a> <ul> <li><a href="#heading-match-element-text" id="markdown-toc-heading-match-element-text">Match element text</a></li> <li><a href="#heading-use-index" id="markdown-toc-heading-use-index">Use index</a></li> </ul> </li> <li><a href="#heading-ultimate-solution" id="markdown-toc-heading-ultimate-solution">Ultimate Solution</a></li> </ul> <h2 id="heading-ext-js-example">Ext JS Example</h2> <p>Here Sencha Ext JS' <a href="http://examples.sencha.com/extjs/6.2.0/examples/classic/ticket-app/index.html" target="_blank">Ticket App</a> is used as an example:</p> <figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- The Password Field --&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"x-field password x-form-item x-form-item-default x-form-type-password x-field-default x-anchor-form-item"</span> <span class="na">role=</span><span class="s">"presentation"</span> <span class="na">id=</span><span class="s">"textfield-1012"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;label</span> <span class="na">id=</span><span class="s">"textfield-1012-labelEl"</span> <span class="na">data-ref=</span><span class="s">"labelEl"</span> <span class="na">class=</span><span class="s">"x-form-item-label x-form-item-label-default   x-unselectable"</span> <span class="na">for=</span><span class="s">"textfield-1012-inputEl"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"x-form-item-label-inner x-form-item-label-inner-default"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"textfield-1012-labelTextEl"</span> <span class="na">data-ref=</span><span class="s">"labelTextEl"</span> <span class="na">class=</span><span class="s">"x-form-item-label-text"</span><span class="nt">&gt;</span>Password:<span class="nt">&lt;/span&gt;</span>
    <span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;/label&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"textfield-1012-bodyEl"</span> <span class="na">data-ref=</span><span class="s">"bodyEl"</span> <span class="na">role=</span><span class="s">"presentation"</span>
  <span class="na">class=</span><span class="s">"x-form-item-body x-form-item-body-default x-form-text-field-body x-form-text-field-body-default  "</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"textfield-1012-triggerWrap"</span> <span class="na">data-ref=</span><span class="s">"triggerWrap"</span> <span class="na">role=</span><span class="s">"presentation"</span> <span class="na">class=</span><span class="s">"x-form-trigger-wrap x-form-trigger-wrap-default"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"textfield-1012-inputWrap"</span> <span class="na">data-ref=</span><span class="s">"inputWrap"</span> <span class="na">role=</span><span class="s">"presentation"</span> <span class="na">class=</span><span class="s">"x-form-text-wrap x-form-text-wrap-default"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"textfield-1012-inputEl"</span> <span class="na">data-ref=</span><span class="s">"inputEl"</span> <span class="na">type=</span><span class="s">"password"</span> <span class="na">size=</span><span class="s">"1"</span> <span class="na">name=</span><span class="s">"password"</span><span class="na">role=</span><span class="s">"textbox"</span>
        <span class="na">aria-required=</span><span class="s">"true"</span> <span class="na">class=</span><span class="s">"x-form-field x-form-required-field x-form-text x-form-text-default  "</span> <span class="na">autocomplete=</span><span class="s">"off"</span> <span class="na">data-componentid=</span><span class="s">"textfield-1012"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure> <h2 id="donts">DON'Ts</h2> <h3 id="heading-dont-match-only-ids">Don't match only IDs</h3> <figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="c1">// DON'T USE</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">FindElement</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="nf">Id</span><span class="p">(</span><span class="s">"textfield-1012-inputEl"</span><span class="p">));</span></code></pre></figure> <p>Unless IDs are explicitly defined in application's source code, ExtJS will produce IDs for each elements dynamically, like <code class="language-plaintext highlighter-rouge">textfield-1012-inputEl</code>, <code class="language-plaintext highlighter-rouge">button-1016-btnInnerEl</code>. Matching elements using those dynamic numbers will make project unmaintainable. Even matching on IDs partially like <code class="language-plaintext highlighter-rouge">input[id$='inputEl']</code> wouldn't help either, as there will be lots of others elements have the same id structures.</p> <h3 id="heading-dont-use-highly-position-dependent-xpaths">Don't use highly position-dependent XPaths</h3> <figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="c1">// DON'T USE</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">FindElement</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="nf">XPath</span><span class="p">(</span><span class="s">"//div[contains(@class, 'x-panel-body')]/div/div/div[2]/div/div/div/input"</span><span class="p">));</span></code></pre></figure> <p>Highly position-dependent XPaths, or even worse, absolute XPaths should be avoided no matter what, even for web applications with simple DOM structures. Because any tiny bit of DOM change will result in XPath becoming invalid. XPaths like <code class="language-plaintext highlighter-rouge">//div[contains(@class, 'x-panel-body')]/div/div/div[2]/div/div/div/input</code> are too fragile in terms of UI automation.</p> <h3 id="heading-dont-match-single-class-name-only">Don't match single class name only</h3> <figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="c1">// DON'T USE</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">FindElement</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="nf">ClassName</span><span class="p">(</span><span class="s">"x-form-text"</span><span class="p">));</span></code></pre></figure> <p>Just like matching IDs, matching single class name won't help either. As ExtJS generates class names in a similar naming convention for all elements, <code class="language-plaintext highlighter-rouge">.x-form-field</code> will mostly likely result in multiple elements.</p> <h3 id="heading-dont-perform-exact-match-on-multiple-classes">Don't perform exact match on multiple classes</h3> <figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="c1">// DON'T USE</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">FindElement</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="nf">XPath</span><span class="p">(</span><span class="s">".//a[contains(@class, 'x-btn btn-submit')]"</span><span class="p">));</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">FindElement</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="nf">CssSelector</span><span class="p">(</span><span class="s">"a[class*='x-btn btn-submit']"</span><span class="p">));</span>

<span class="c1">// TO MATCH TWO CLASS NAMES TOGETHER</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">FindElement</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="nf">CssSelector</span><span class="p">(</span><span class="s">"a.x-btn.btn-submit"</span><span class="p">));</span></code></pre></figure> <p>This happens mostly to XPath locators instead of CSS selectors.</p> <p>When matching multiple class names using CSS selectors, people would normally use something like <code class="language-plaintext highlighter-rouge">a.x-btn.btn-submit</code>, which matches an anchor that has class <code class="language-plaintext highlighter-rouge">x-btn</code> and <code class="language-plaintext highlighter-rouge">btn-submit</code>. This is absolutely fine without any problems.</p> <p>However, for XPaths, a common usage <code class="language-plaintext highlighter-rouge">.//a[contains(@class, 'x-btn btn-submit')]</code> doesn't do the same thing, as it matches exactly class attributes <code class="language-plaintext highlighter-rouge">x-btn btn-submit</code> with exact one space and class order. This XPath is actually equivalent to CSS selector <code class="language-plaintext highlighter-rouge">a[class*='x-btn btn-submit']</code>. Matching class names by exact string <code class="language-plaintext highlighter-rouge">x-btn btn-submit</code> should be avoided unless the order is important in that particular case.</p> <p>Imagine we have few elements as the followings:</p> <ol> <li><code class="language-plaintext highlighter-rouge">&lt;input class="x-form-field x-form-text"&gt;</code></li> <li><code class="language-plaintext highlighter-rouge">&lt;input class="x-form-field x-form-text "&gt;&lt;!-- Note the trailing space --&gt;</code></li> <li><code class="language-plaintext highlighter-rouge">&lt;input class="x-form-required-field x-form-field x-form-text x-form-text-default "&gt;</code></li> <li><code class="language-plaintext highlighter-rouge">&lt;input class="x-form-text x-form-field"&gt;</code></li> </ol> <p>How XPath and CSS Selectors match them:</p> <ul> <li>Match only #1 (exact match)</li> </ul> <figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="n">driver</span><span class="p">.</span><span class="nf">FindElement</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="nf">CssSelector</span><span class="p">(</span><span class="s">"input[class='x-form-field x-form-text']"</span><span class="p">));</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">FindElement</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="nf">XPath</span><span class="p">(</span><span class="s">"//input[@class='x-form-field x-form-text']"</span><span class="p">));</span></code></pre></figure> <ul> <li>Match #1, #2 and #3 (match class contains <code class="language-plaintext highlighter-rouge">x-form-field x-form-text</code>, class order matters)</li> </ul> <figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="n">driver</span><span class="p">.</span><span class="nf">FindElement</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="nf">CssSelector</span><span class="p">(</span><span class="s">"input[class*='x-form-field x-form-text']"</span><span class="p">));</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">FindElement</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="nf">XPath</span><span class="p">(</span><span class="s">"//input[contains(@class, 'x-form-field x-form-text')]"</span><span class="p">));</span></code></pre></figure> <ul> <li>Match #1, #2, #3 and #4 (as long as elements have class <code class="language-plaintext highlighter-rouge">x-form-field</code> and <code class="language-plaintext highlighter-rouge">x-form-text</code>)</li> </ul> <figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="n">driver</span><span class="p">.</span><span class="nf">FindElement</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="nf">CssSelector</span><span class="p">(</span><span class="s">"input.x-form-field.x-form-text"</span><span class="p">));</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">FindElement</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="nf">XPath</span><span class="p">(</span><span class="s">"//input[contains(@class, 'x-form-field') and contains(@class, 'x-form-text')]"</span><span class="p">));</span></code></pre></figure> <h3 id="heading-dont-use-tools-to-generate-locators">Don't use tools to generate locators</h3> <p>There are XPath generating extensions in Chrome or Firefox to create XPaths. Never ever use them against web applications with complex DOM. Some tools generate absolute or position-based XPaths, which are totally rubbish and shouldn't be used in any Selenium WebDriver code at all. Some extensions are smarter that generates some relative selectors based on class names or IDs. Due to the nature of Ext JS as explained above, class names or IDs are unlikely to be sufficient for locating elements in Ext JS applications most of the time.</p> <h2 id="heading-dos">DOs</h2> <blockquote> <p>Q: What makes a locator good locator?<br/><br/> A: In my opinion, good locators are unique and concise, not random or fragile.</p> </blockquote> <h3 id="heading-use-meaningful-class-names">Use meaningful class names</h3> <p>Among all those Ext JS generated class names, sometimes some meaningful ones can be used as good locators. In the example above, there are two labels for text fields. To locate the 'Password' label, <code class="language-plaintext highlighter-rouge">.password label</code> would be a nice and easy one, as <code class="language-plaintext highlighter-rouge">password</code> is the meaningful and unique class name among those text fields.</p> <figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="n">driver</span><span class="p">.</span><span class="nf">FindElement</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="nf">CssSelector</span><span class="p">(</span><span class="s">".password label"</span><span class="p">));</span></code></pre></figure> <h3 id="heading-use-unique-attributes">Use unique attributes</h3> <p>If there are no meaningful class names generated by Ext JS can be found, the next step is to find some unique attributes. Sometimes this is even better than meaningful class names depending how unique they are.</p> <p>Take the Ticket App login screen as an example, there is only one button and one dropdown combo box. It is fairly easy locate them using either CSS or XPath locators.</p> <figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="c1">// In this example, there is only one combobox or button in the dialog.</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">FindElement</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="nf">CssSelector</span><span class="p">(</span><span class="s">"input[role='combobox']"</span><span class="p">));</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">FindElement</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="nf">CssSelector</span><span class="p">(</span><span class="s">"a[role='button']"</span><span class="p">));</span></code></pre></figure> <h3 id="heading-find-a-unique-ancestor">Find a unique ancestor</h3> <p>Sometimes one locator matches multiple elements, but each element is within a unique ancestor. In this case, try locate the unique ancestor and then match the element based on this context.</p> <p>For example, here are few 'Cancel' buttons which are almost identical except for one is in a container <code class="language-plaintext highlighter-rouge">&lt;div id='header'&gt;</code>, while the other two are in <code class="language-plaintext highlighter-rouge">&lt;div id='footer'&gt;</code>.</p> <figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">'header'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"ext-gen1179"</span> <span class="na">class=</span><span class="s">"x-grid-cell-inner x-unselectable"</span><span class="nt">&gt;</span>Cancel<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">'footer'</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">'ext-gen1260'</span> <span class="na">class=</span><span class="s">'x-grid3-body'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"ext-gen1359"</span> <span class="na">class=</span><span class="s">"x-grid-cell-inner x-unselectable"</span><span class="nt">&gt;</span>Cancel<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">'ext-gen2555'</span> <span class="na">class=</span><span class="s">'x-toolbar-right-row'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"ext-gen2951"</span> <span class="na">class=</span><span class="s">"x-grid-cell-inner x-unselectable"</span><span class="nt">&gt;</span>Cancel<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure> <p>Then instead of matching by ID, class names or anything else, each button can be uniquely identified by their ancestors.</p> <figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="n">driver</span><span class="p">.</span><span class="nf">FindElement</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="nf">XPath</span><span class="p">(</span><span class="s">"//div[@id='header']//div[text()='Cancel']"</span><span class="p">));</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">FindElement</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="nf">XPath</span><span class="p">(</span><span class="s">"//div[@id='footer']//div[contains(@class, 'x-grid3-body')]//div[text()='Cancel']"</span><span class="p">));</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">FindElement</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="nf">XPath</span><span class="p">(</span><span class="s">"//div[@id='footer']//div[contains(@class, 'x-toolbar-right-row')]//div[text()='Cancel']"</span><span class="p">));</span></code></pre></figure> <h2 id="heading-gotchas">Gotchas</h2> <h3 id="heading-match-element-text">Match element text</h3> <p>Matching element by text is commonly used to locate elements. Personally I rarely use it, but there is nothing wrong with the approach itself. However, to match elements with text, there are things to be considered first!</p> <ul> <li> <p>Whitespace</p> <p>If you are doing something like <code class="language-plaintext highlighter-rouge">//div[contains(@class, 'password')]/label//span[text()='Password:']</code> to find the <code class="language-plaintext highlighter-rouge">Password:</code> label, it won't match if there are extra whitespaces around it!</p> <p>In this case, normalize whitespace in XPath would be a good idea.</p> </li> </ul> <figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="n">driver</span><span class="p">.</span><span class="nf">FindElement</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="nf">XPath</span><span class="p">(</span><span class="s">"//div[contains(@class, 'password')]/label[normalize-space(.)='Password:']"</span><span class="p">));</span></code></pre></figure> <ul> <li> <p>Internationalization</p> <p>Many web applications nowadays support internationalization. Matching text will make the tests dependent on the displaying language of the application. This is one major reason that I personally always avoid writing text matching locators. Even if there is only one language supported in the application at the moment, it's still good to keep Selenium code extensible in the future.</p> </li> <li> <p>Encoding</p> <p>Say for example, the only display language of the application is Simplified Chinese. If the test code uses text matching, it might run into encoding problems, especially for those Selenium WebDriver Python binding users.</p> </li> </ul> <h3 id="heading-use-index">Use index</h3> <p>Sometimes it is not easy to find one perfect locator that matches exact one element. Therefore many developers like to find few elements by one locator and index the elements, or use <code class="language-plaintext highlighter-rouge">nth-child()</code>, <code class="language-plaintext highlighter-rouge">first-child</code>, <code class="language-plaintext highlighter-rouge">[1]</code> in CSS Selectors or XPaths.</p> <p>There is nothing wrong with these index-type locators, but they can cause problems potentially. Using them to locate the first or number X item of a list is totally acceptable, where the items are actually structured inside a list (options, lists, etc.) logically. But using them against some elements that are not logically related, like three buttons called 'Cancel' in different containers from the example above, might make tests really fragile that any text change or position change would fail the tests.</p> <h2 id="heading-ultimate-solution">Ultimate Solution</h2> <blockquote> <p>Q: None of the tips above seem to be sufficient. Is there any better way to write locators for Ext JS apps?<br/><br/> A: Yes, there is! Personally, I believe this is ultimate solution.</p> </blockquote> <p>Web designers can add class names to HTML in order to make styling easier. Developers should add class names to HTML for UI testing purposes too!</p> <p><a href="http://docs.sencha.com/extjs/6.2.0/index.html">Ext JS API</a> allows users to set class names in most of their components with great flexibility, which can make locating elements so much easier.</p> <p>For example, to add classes to a button, the following JavaScript code</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">button</span> <span class="o">=</span> <span class="nx">Ext</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="dl">'</span><span class="s1">Ext.Button</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">cls</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ui-test-button</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">labelCls</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ui-test-button-label</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Button</span><span class="dl">'</span>
<span class="p">});</span></code></pre></figure> <p>will generate the following HTML with user defined class names for UI testing purposes.</p> <figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"x-unsized x-component x-button x-button-no-icon ui-test-button x-haslabel x-layout-auto-item"</span>
  <span class="na">id=</span><span class="s">"ext-button-1"</span> <span class="na">data-componentid=</span><span class="s">"ext-button-1"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"x-hidden-display x-badge"</span> <span class="na">id=</span><span class="s">"ext-element-17"</span><span class="nt">&gt;&lt;/span&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"x-button-icon x-font-icon x-hidden"</span> <span class="na">id=</span><span class="s">"ext-element-19"</span><span class="nt">&gt;&lt;/span&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"ui-test-button-label"</span> <span class="na">id=</span><span class="s">"ext-element-18"</span><span class="nt">&gt;</span>Button<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure> </div> </div> </div> <footer class="unit-foot"> <div class="unit-inner unit-foot-inner"> <div class="post-buttons"> <a class="internal gotop" href="#page" title="Back to Top">Back to Top</a> <div class="addthis_toolbox addthis_default_style addthis_32x32_style"> <small class="label">Share Post:</small> <a class="btn-share-post addthis_button_email"></a> <a class="btn-share-post addthis_button_facebook"></a> <a class="btn-share-post addthis_button_google_plusone_share"></a> <a class="btn-share-post addthis_button_reddit"></a> <a class="btn-share-post addthis_button_twitter"></a> </div> <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-53819e27689934f9"></script> </div> <nav class="pagination"> <a class="internal" rel="prev" href="/2017/01/11/get-a-strava-api-access-token-with-write-permission/" title=" 'Get a Strava API access token with write permission'"> ← Get a Strava API access token with write permission</a> <a class="internal" rel="next" href="/2017/02/25/convert-speed-to-pace-programmatically-using-ruby/" title="Next Post 'Convert speed to pace programmatically using Ruby'">Convert speed to pace programmatically using Ruby → </a> </nav> </div> </footer> <div class="misc-content"> <script>$(document).ready(function(){var b="ULZ0b9TFdfCUJSKQd4WCKv2v3u25YoG7YG8zXPewkWrT35lZ0Se9YnxLzoV6VM8W";var c="yizeng";var a="link:"+$(".comments .show-hidden").attr("data-disqus-url");$.ajax({type:"GET",url:"//disqus.com/api/3.0/threads/set.jsonp",data:{api_key:b,forum:c,thread:a},cache:false,dataType:"jsonp",success:function(d){if(d.response.length===1){btnText="Show Comments ("+d.response[0].posts+")";$(".comments .show-hidden").html(btnText)}}});$(".comments .show-hidden").on("click",function(){$.ajaxSetup({cache:true});$.getScript("//"+c+".disqus.com/embed.js");$.ajaxSetup({cache:false});$(this).remove()});if(/\#comments/.test(location.hash)){$(".comments .show-hidden").trigger("click")}});</script> <div class="comments"> <button class="center-block show-hidden" title="Show Comments" data-disqus-url="http://yizeng.me/2017/01/15/tips-for-locating-elements-in-ext-js-applications-with-selenium-webdriver/">Show Comments</button> <div id="disqus_thread"></div> </div> </div> </div> </div> </article> </div> </div> </div> </div> <footer class="the-footer"> <div class="unit-foot"> <div class="unit-inner unit-foot-inner"> <div class="misc vcard"> <div class="about"> <h4><a href="/">About</a></h4> <p>Yi Zeng, a senior software engineer based in Berlin, Germany.</p> <p><small>Theme <a href="https://github.com/yizeng/jekyll-theme-simple-texture" target="_blank">Simple Texture</a> developed by <a href="http://yizeng.me" target="_blank">Yi Zeng</a>, powered by <a href="https://jekyllrb.com/" target="_blank">Jekyll</a>.</small></p> </div> <div class="social-links"> <a class="ico-rss" href="/feed.xml" rel="me" target="_blank" title="feed"></a> <a class="ico-github" href="https://github.com/yizeng/" rel="me" target="_blank" title="github"></a> <a class="ico-linkedin" href="https://www.linkedin.com/in/yizengnz/" rel="me" target="_blank" title="linkedin"></a> <a class="ico-stackoverflow" href="https://stackoverflow.com/users/1177636/yi-zeng" rel="me" target="_blank" title="stackoverflow"></a> </div> </div> </div> </div> <a href="#" class="internal back-to-top">Back to Top</a> </footer> </div> <script>$(document).ready(function(){var c=50,b=500,a=960;$(window).scroll(function(){if($(window).width()>a){if($(this).scrollTop()>c){$("footer").css("top","20px");$("footer .back-to-top").fadeIn(b)}else{$("footer").css("top","auto");$("footer .back-to-top").fadeOut(b)}}});$(window).resize(function(){if($(window).width()<a){$("footer").css("top","auto");$("footer .back-to-top").fadeOut(b)}if($(window).width()>=a&&$(this).scrollTop()>c){$("footer").css("top","20px");$("footer .back-to-top").fadeIn(b)}});$("footer .back-to-top, .gotop").on("click",function(d){d.preventDefault();$("html, body").animate({scrollTop:0},b);return false});$(".show-hidden").on("click",function(){$(this).parent().next().toggleClass("hidden");$(this).toggleClass("hidden")})});</script> <script src="/assets/javascripts/jekyll-search.jquery.js"></script> <script>$(document).ready(function(){$(".search-field").simpleJekyllSearch({jsonFile:"/search.json",template:'<li><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></li>',searchResults:".search-wrapper .results",searchResultsTitle:"<h4>Search results</h4>",noResults:"<p>Oh shucks<br/><small>Nothing found :(</small></p>"})});(function(c,b,d){var a=function(){c(".nav-wrapper, .search-wrapper").removeAttr("style");c(".nav-form, .search-form").removeClass("active");c("body").removeClass("nav-overlay search-overlay")};c(".nav-global .btn-search").on("click",function(){c(".search-wrapper").css({display:"block"});c(".search-form").addClass("active");c(".search-form").find("input").focus();c("body").addClass("search-overlay")});c(".nav-global .btn-menu").on("click",function(){c(".nav-wrapper").css({display:"block"});c(".nav-form").addClass("active");c(".nav-form .search-field").prop("disabled",true);c("body").addClass("nav-overlay")});c(".nav-wrapper .btn-close, .search-wrapper .btn-close").on("click",function(){a()});c(document).on("keyup",function(f){if(f.keyCode===27){a()}})})(jQuery,window);</script> <script src='//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.js'></script> <script src='//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-buttons.min.js'></script> <script src="/assets/javascripts/unveil/jquery.unveil.min.js"></script> <script>window.jQuery.fancybox||document.write('<script src="/assets/javascripts/fancybox/jquery.fancybox.pack.js?v=2.1.4"><\/script>');window.jQuery.fancybox.helpers.buttons||document.write('<script src="/assets/javascripts/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"><\/script>');</script> <script>$("head").append('<link rel="stylesheet" href="/assets/javascripts/fancybox/jquery.fancybox.css?v=2.1.4" type="text/css" />');$("head").append('<link rel="stylesheet" href="/assets/javascripts/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" />');$(".post-image").fancybox({prevEffect:"none",nextEffect:"none",closeBtn:true,helpers:{title:{type:"float"}}});$(document).ready(function(){$(".post-image > img").unveil(450)});</script> </body> </html>