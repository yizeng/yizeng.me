<!DOCTYPE html> <!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]--> <!--[if IE 7]><html class="no-js lt-ie9 lt-ie8"><![endif]--> <!--[if IE 8]><html class="no-js lt-ie9"><![endif]--> <!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]--> <head> <meta charset="utf-8"> <!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><![endif]--> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Exclude Selenium WebDriver traffic from Google Analytics | Yi Zeng’s Blog</title> <meta name="generator" content="Jekyll v3.9.3"/> <meta property="og:title" content="Exclude Selenium WebDriver traffic from Google Analytics"/> <meta name="author" content="Yi Zeng"/> <meta property="og:locale" content="en"/> <meta name="description" content="How to exclude Selenium WebDriver testing traffic from Google Analytics"/> <meta property="og:description" content="How to exclude Selenium WebDriver testing traffic from Google Analytics"/> <link rel="canonical" href="http://yizeng.me/2017/01/08/exclude-your-selenium-webdriver-traffic-from-google-analytics/"/> <meta property="og:url" content="http://yizeng.me/2017/01/08/exclude-your-selenium-webdriver-traffic-from-google-analytics/"/> <meta property="og:site_name" content="Yi Zeng’s Blog"/> <meta property="og:type" content="article"/> <meta property="article:published_time" content="2017-01-08T00:00:00+01:00"/> <meta name="twitter:card" content="summary"/> <meta property="twitter:title" content="Exclude Selenium WebDriver traffic from Google Analytics"/> <script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Yi Zeng"},"dateModified":"2017-01-08T00:00:00+01:00","datePublished":"2017-01-08T00:00:00+01:00","description":"How to exclude Selenium WebDriver testing traffic from Google Analytics","headline":"Exclude Selenium WebDriver traffic from Google Analytics","mainEntityOfPage":{"@type":"WebPage","@id":"http://yizeng.me/2017/01/08/exclude-your-selenium-webdriver-traffic-from-google-analytics/"},"url":"http://yizeng.me/2017/01/08/exclude-your-selenium-webdriver-traffic-from-google-analytics/"}</script> <meta name="keywords" content="google analytics,ruby,selenium webdriver"/> <link type="application/atom+xml" rel="alternate" href="http://yizeng.me/feed.xml" title="Yi Zeng’s Blog"/> <link href='/assets/stylesheets/blog.css' rel="stylesheet" type="text/css"> <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script> <script>window.Modernizr||document.write('<script src="/assets/javascripts/modernizr-2.8.3.min.js"><\/script>');</script> <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> <script>window.jQuery||document.write('<script src="/assets/javascripts/jquery-3.3.1.min.js"><\/script>');</script> <script src="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script> <script>window.Pace||document.write('<script src="/assets/javascripts/pace.min.js"><\/script>');</script> <script>(function(b,m,h,a,g){b[a]=b[a]||[];b[a].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var k=m.getElementsByTagName(h)[0],e=m.createElement(h),c=a!="dataLayer"?"&l="+a:"";e.async=true;e.src="https://www.googletagmanager.com/gtm.js?id="+g+c;k.parentNode.insertBefore(e,k)})(window,document,"script","dataLayer","GTM-P5NFP45");</script> </head> <body> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P5NFP45" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> <!--[if IE]><p class="site-notice">You are using an outdated browser. Please <a href="http://browsehappy.com/" target="_blank">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true" target="_blank">activate Google Chrome Frame</a> to improve your experience.</p><![endif]--> <noscript> <p class="site-notice">This site requires JavaScript. Here are the instructions <a href="http://www.enable-javascript.com/" target="_blank">how to enable JavaScript in your web browser</a>.</p> </noscript> <div class="nav-wrapper overlay-wrapper"> <div class="nav-form overlay-form"> <span class="overlay-header menu">Menu</span> <a class="btn-close">Close</a> <div class="results"> <ul> <li><a href="/blog/categories/">Categories</a></li> <li><a href="/blog/tags/">Tags</a></li> <li><a href="/">About</a></li> </ul> </div> </div> </div> <div class="search-wrapper overlay-wrapper"> <div class="search-form overlay-form"> <input type="text" class="overlay-header search-field" placeholder="Search..."> <a class="btn-close">Close</a> <ul class="results"></ul> </div> </div> <div id="page" class="hentry"> <header class="the-header"> <div class="unit-head"> <div class="unit-inner unit-head-inner"> <nav class="nav-global"> <ul> <li class="logo nav-link"> <button class="btn-menu" title="Menu"></button> <a href="/blog/">Yi Zeng’s Blog</a> <!--[if !IE]>--> <button class="btn-search" title="Search"></button> <!--<![endif]--> </li> <li class="nav-link"><a title="Categories" href="/blog/categories/">Categories</a></li> <li class="nav-link"><a title="Tags" href="/blog/tags/">Tags</a></li> <!--[if !IE]>--> <li class="nav-link"><a title="Search" class="btn-search" href="#">Search</a></li> <!--<![endif]--> </ul> </nav> </div> </div> </header> <div class="body animated fadeInDown" role="main"> <div class="unit-body"> <div class="unit-inner unit-body-inner"> <div class="entry-content"> <article class="unit-article layout-post"> <div class="unit-inner unit-article-inner"> <div itemscope itemtype="http://schema.org/Article" class="content"> <header> <div class="unit-head"> <div class="unit-inner unit-head-inner"> <h1 class="entry-title" itemprop="name">Exclude Selenium WebDriver traffic from Google Analytics</h1> </div> </div> </header> <div class="bd article-content"> <div class="entry-content"> <div class="meta"> <p class="date-publish"> Published: <time itemprop="datePublished" class="date-pub updated" title="2017-01-08T00:00:00+01:00" datetime="2017-01-08T00:00:00+01:00">January 08, 2017 </time> by <a class="author" href="/" rel="author" title="Show Author"> <span itemprop="author" itemscope itemtype="http://schema.org/Person"> <span itemprop="name">Yi Zeng</span> </span> </a> <a class="license-icon" rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" title="Show License"> <img alt="Creative Commons Licence" style="border-width:0" src="/assets/images/theme/cc-by-sa.png" height="16" width="80"/> </a> </p> <ul class="list-category list-linear"> <li class="list-head">Categories: </li> <li> <a href="/blog/categories/#tutorials" title="tutorials"> tutorials <span>26</span></a> </li> </ul> <ul class="list-tag list-linear"> <li class="list-head">Tags: </li> <li> <a href="/blog/tags/#google-analytics" title="google analytics">google analytics <span>1</span></a> </li> <li> <a href="/blog/tags/#ruby" title="ruby">ruby <span>14</span></a> </li> <li> <a href="/blog/tags/#selenium-webdriver" title="selenium webdriver">selenium webdriver <span>16</span></a> </li> </ul> </div> <div itemprop="articleBody"> <p>For sites being tested by automated UI testing frameworks like Selenium WebDriver or Watir, developers may find it useful to exclude internal automated testing traffic from Google Analytics.</p> <p>However, first things first, before talking about how to exclude such traffic, the question would be "why such traffic exists?". If such traffic comes from unknown sources, i.e. some people are running Selenium WebDriver against the website, then there isn't much can be done, unless the IP/ISP or User Agent can be uniquely identified. If such traffic is from site developers' own Selenium WebDriver tests, then the question becomes "Why Selenium tests were run against production"? Normally production servers only require some manual exploratory/smoke testing, instead of intensive automated testing to mess around live databases and slow down the servers.</p> <p>In this case, when Selenium is used only against testing environment, it would be relatively easy to exclude its traffic. One approach would be using a different Google Analytics token from production, so the analytics data get separated out. Another solution is to avoid executing Google Analytics snippet if the site is deployed on testing servers.</p> <p>Anyway, if it is really necessary to use Selenium against production for some reason, Here are few solutions which might help exclude internal traffic from Google Analytics. Some of these are just general approaches for excluding certain traffic from Google Analytics side, while some may involve updating Selenium test code explicitly.</p> <ul class="toc" id="markdown-toc"> <li><a href="#heading-general-solutions" id="markdown-toc-heading-general-solutions">General solutions</a> <ul> <li><a href="#heading-exclude-ipisp" id="markdown-toc-heading-exclude-ipisp">Exclude IP/ISP</a></li> <li><a href="#heading-edit-hosts-file" id="markdown-toc-heading-edit-hosts-file">Edit hosts file</a></li> </ul> </li> <li><a href="#heading-selenium-specific-solutions" id="markdown-toc-heading-selenium-specific-solutions">Selenium specific solutions</a> <ul> <li><a href="#heading-disable-javascript" id="markdown-toc-heading-disable-javascript">Disable JavaScript</a></li> <li><a href="#heading-set-custom-user-agents" id="markdown-toc-heading-set-custom-user-agents">Set custom user agents</a></li> <li><a href="#heading-opt-out-plugins" id="markdown-toc-heading-opt-out-plugins">Opt-out plugins</a></li> <li><a href="#heading-use-a-proxy" id="markdown-toc-heading-use-a-proxy">Use a proxy</a></li> </ul> </li> <li><a href="#heading-comparison" id="markdown-toc-heading-comparison">Comparison</a></li> </ul> <h2 id="heading-general-solutions">General solutions</h2> <h3 id="heading-exclude-ipisp">Exclude IP/ISP</h3> <p>A custom filter on certain IP address/range or ISP can be created in order to filter out internal traffic. See Google Analytics official documentation's '<a href="https://support.google.com/analytics/answer/1034840?hl=en&amp;ref_topic=1034830">Exclude internal traffic</a>' section for details.</p> <ol> <li>Go to the <code class="language-plaintext highlighter-rouge">ADMIN</code> Section of Google Analytics and select one website view from your account.</li> <li>Choose <code class="language-plaintext highlighter-rouge">Filters</code>.</li> <li>Click button <code class="language-plaintext highlighter-rouge">ADD FILTER</code>.</li> <li>Select <code class="language-plaintext highlighter-rouge">Create new filter</code> and give it a new filter name.</li> <li>Choose filter type: <code class="language-plaintext highlighter-rouge">Custom</code>.</li> <li>Check <code class="language-plaintext highlighter-rouge">Exclude</code> radio button.</li> <li>Choose "IP Address" from <code class="language-plaintext highlighter-rouge">Filter Field</code> and type in IP Address Range in <code class="language-plaintext highlighter-rouge">Filter Pattern</code>.</li> <li>Apply this filter to the views you want to filter. For example, if the single IP address is 176.168.1.1, then enter <code class="language-plaintext highlighter-rouge">176\.168\.1\.1</code>. If the range of IP addresses is 176.168.1.1-15 and 10.0.0.1-14, then enter <code class="language-plaintext highlighter-rouge">^176\.168\.1\.([1-9]|1[0-5])$|^10\.0\.0\.([1-9]|1[0-4])$</code></li> </ol> <p><a class="post-image" href="/assets/images/posts/2017-01-08-google-analytics-filter.gif"> <img itemprop="image" data-src="/assets/images/posts/2017-01-08-google-analytics-filter.gif" src="/assets/javascripts/unveil/loader.gif" alt="Create IP Filter on Google Analytics"/> </a></p> <p>However, this may also filter out data that are not generated by Selenium WebDriver. On the other hand, if the tests are run on distributed CI systems or environment with dynamic IP, maintaining those IP addresses in Google Analytics setting might be too much of a hassle.</p> <h3 id="heading-edit-hosts-file">Edit hosts file</h3> <p>Without changing Google Analytics settings from data-receiving end, one other direction is to block GA's traffic being sent to its server. To achieve it, editing hosts file on the machines where the tests are run would be a straightforward thing to do. It requires certain permissions on testing environment, and will block all traffic for all sites to Google Analytics, hence this might not be as good as it sounds.</p> <p>For more details about how to exclude Google Analytics by editing hosts file, here are few posts explaining the same thing:</p> <ul> <li><a href="http://jesin.tk/block-google-analytics-statcounter/">Blocking Google Analytics and Statcounter</a></li> <li><a href="http://www.dslreports.com/forum/r27645531-How-to-block-google-analytics">How to block google-analytics</a></li> <li><a href="http://www.ccsf.edu/Policy/Privacy/ga.html">Block Google Analytics</a></li> <li><a href="http://how-to.wikia.com/wiki/How_to_block_your_browser_from_sending_information_to_Google_Analytics">How to block your browser from sending information to Google Analytics</a></li> </ul> <h2 id="heading-selenium-specific-solutions">Selenium specific solutions</h2> <h3 id="heading-disable-javascript">Disable JavaScript</h3> <p>Since Google Analytics's tracking code is just a piece of JavaScript code, disabling the JavaScript in browser seems to be one reasonable solution.</p> <p>Seriously? Nope. Modern websites nowadays use a lot of JavaScript to make things happen, disabling it doesn't seem to be feasible at all, unless the target site doesn't use JavaScript. Selenium WebDriver also requires JavaScript to function properly, as a result, starting Selenium with JavaScript disabled might cause all tests behave strangely.</p> <p>Although a previous article <a href="/2014/01/08/disable-javascript-using-selenium-webdriver/">Disable JavaScript using Selenium WebDriver</a> shows that this is achievable in some browsers, this should not be encouraged anyway due to the side effects.</p> <h3 id="heading-set-custom-user-agents">Set custom user agents</h3> <p>As most of the browsers' user agents can be set through Selenium, wrap site's Google Analytics' snippet with an if-statement to ignore some certain user agents would be another possible approach to deal with it.</p> <p>For example, Google Analytics snippet will only be executed if browser's user agent doesn't contain "phantomjs".</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/.*PhantomJS.*/gi</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// Google Analytics's tracking snippet</span>
<span class="p">}</span></code></pre></figure> <p>If the testing is done using browsers like Chrome or Firefox, an additional step is needed to set a special testing user agent when starting browsers using Selenium WebDriver. A previous article <a href="/2013/08/10/set-user-agent-using-selenium-webdriver-c-and-ruby/">Set user agent using Selenium WebDriver C# and Ruby</a> provides few sample snippets on how to set user agents. Note that user agent can't be set for IE using Selenium WebDriver, therefore this approach is not going to work for IE<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup>.</p> <p>Here, Firefox for example, add something identifiable (e.g "Selenium") into the user agent when launching, then wrap Google Analytics's tracking code with if-statement to ignore any user agents that contain word "Selenium" like above.</p> <figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># Environment Tested:</span>
<span class="c1"># Windows 10, Ruby 2.3.3p222, Selenium 3.0.5, GeckoDriver 0.13, Firefox 50.1</span>
<span class="nb">require</span> <span class="s1">'selenium-webdriver'</span>

<span class="n">profile</span> <span class="o">=</span> <span class="no">Selenium</span><span class="o">::</span><span class="no">WebDriver</span><span class="o">::</span><span class="no">Firefox</span><span class="o">::</span><span class="no">Profile</span><span class="p">.</span><span class="nf">new</span>

<span class="n">original_ua</span> <span class="o">=</span> <span class="s1">'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:26.0) Gecko/20100101 Firefox/26.0'</span>
<span class="n">profile</span><span class="p">[</span><span class="s1">'general.useragent.override'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Selenium </span><span class="si">#{</span><span class="n">original_ua</span><span class="si">}</span><span class="s2">"</span>

<span class="n">driver</span> <span class="o">=</span> <span class="no">Selenium</span><span class="o">::</span><span class="no">WebDriver</span><span class="p">.</span><span class="nf">for</span> <span class="ss">:firefox</span><span class="p">,</span> <span class="ss">:profile</span> <span class="o">=&gt;</span> <span class="n">profile</span>
<span class="c1"># Now user agent is 'Selenium Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:26.0) Gecko/20100101 Firefox/26.0'</span></code></pre></figure> <h3 id="heading-opt-out-plugins">Opt-out plugins</h3> <p>Officially, Google provides <a href="https://tools.google.com/dlpage/gaoptout">browser add-ons</a> to opt-out Google Analytics. With this plugin installed in the browser, no Google Analytics data will be collected and used by Google. It supports IE 11, Chrome, Firefox, Safari and Opera, which unfortunately, means that this won't work for PhantomJS. Additionally, Selenium WebDriver cannot start IE with custom add-ons installed<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup>, therefore this won't work for IE unless pre-install manually.</p> <h4 id="heading-chrome">Chrome</h4> <p>The Chrome extension can be found within Chrome Store <a href="https://chrome.google.com/webstore/detail/google-analytics-opt-out/fllaojicojecljbmefodhfapmkghcbnh?hl=en">here</a> and downloaded using third party sites like <a href="http://chrome-extension-downloader.com/">Chrome Extension Downloader</a>. Save it somewhere locally and start Chrome using the following Selenium WebDriver code.</p> <figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># Environment Tested:</span>
<span class="c1"># Windows 10, Ruby 2.3.3p222, Selenium 3.0.5, ChromeDriver 2.27, Chrome 55.0</span>
<span class="nb">require</span> <span class="s1">'selenium-webdriver'</span>

<span class="n">profile</span> <span class="o">=</span> <span class="no">Selenium</span><span class="o">::</span><span class="no">WebDriver</span><span class="o">::</span><span class="no">Chrome</span><span class="o">::</span><span class="no">Profile</span><span class="p">.</span><span class="nf">new</span>
<span class="n">profile</span><span class="p">.</span><span class="nf">add_extension</span><span class="p">(</span><span class="s2">"./Google-Analytics-Opt-out-Add-on-(by-Google)_v1.1.crx"</span><span class="p">)</span>

<span class="n">driver</span> <span class="o">=</span> <span class="no">Selenium</span><span class="o">::</span><span class="no">WebDriver</span><span class="p">.</span><span class="nf">for</span> <span class="ss">:chrome</span><span class="p">,</span> <span class="ss">:profile</span> <span class="o">=&gt;</span> <span class="n">profile</span></code></pre></figure> <h4 id="heading-firefox">Firefox</h4> <p>In order to start Firefox with this add-on installed, first download and save the latest version of Google Analytics Opt-out Add-on <a href="https://dl.google.com/analytics/optout/gaoptoutaddon_0.9.8.xpi">here</a>, then use the following code to start Firefox.</p> <figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># Environment Tested:</span>
<span class="c1"># Windows 10, Ruby 2.3.3p222, Selenium 3.0.5, GeckoDriver 0.13, Firefox 50.1</span>
<span class="nb">require</span> <span class="s1">'selenium-webdriver'</span>

<span class="n">profile</span> <span class="o">=</span> <span class="no">Selenium</span><span class="o">::</span><span class="no">WebDriver</span><span class="o">::</span><span class="no">Firefox</span><span class="o">::</span><span class="no">Profile</span><span class="p">.</span><span class="nf">new</span>
<span class="n">profile</span><span class="p">.</span><span class="nf">add_extension</span><span class="p">(</span><span class="s2">"./gaoptoutaddon_0.9.8.xpi"</span><span class="p">)</span>

<span class="n">driver</span> <span class="o">=</span> <span class="no">Selenium</span><span class="o">::</span><span class="no">WebDriver</span><span class="p">.</span><span class="nf">for</span> <span class="ss">:firefox</span><span class="p">,</span> <span class="ss">:profile</span> <span class="o">=&gt;</span> <span class="n">profile</span></code></pre></figure> <h3 id="heading-use-a-proxy">Use a proxy</h3> <p><a href="https://github.com/lightbody/browsermob-proxy">BrowserMob Proxy</a> allows manipulating HTTP requests and responses, capturing HTTP content, and exporting performance data as a HAR file. It supports blacklisting which can be used as a way of blocking data sent to Google Analytics.</p> <p>Below is a simple example of how it's done using the <a href="https://github.com/jarib/browsermob-proxy-rb">Ruby client for the BrowserMob Proxy</a>.</p> <figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s1">'browsermob/proxy'</span>
<span class="nb">require</span> <span class="s1">'selenium-webdriver'</span>

<span class="n">server</span> <span class="o">=</span> <span class="no">BrowserMob</span><span class="o">::</span><span class="no">Proxy</span><span class="o">::</span><span class="no">Server</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"./browsermob-proxy-2.1.4/bin/browsermob-proxy"</span><span class="p">,</span> <span class="ss">:log</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">)</span>
<span class="n">server</span><span class="p">.</span><span class="nf">start</span>

<span class="n">proxy</span> <span class="o">=</span> <span class="n">server</span><span class="p">.</span><span class="nf">create_proxy</span>
<span class="n">proxy</span><span class="p">.</span><span class="nf">blacklist</span><span class="p">(</span><span class="s2">"https?:</span><span class="se">\/\/</span><span class="s2">www</span><span class="se">\.</span><span class="s2">google-analytics</span><span class="se">\.</span><span class="s2">com</span><span class="se">\/</span><span class="s2">.*"</span><span class="p">,</span> <span class="mi">404</span><span class="p">)</span>

<span class="n">profile</span> <span class="o">=</span> <span class="no">Selenium</span><span class="o">::</span><span class="no">WebDriver</span><span class="o">::</span><span class="no">Firefox</span><span class="o">::</span><span class="no">Profile</span><span class="p">.</span><span class="nf">new</span>
<span class="n">profile</span><span class="p">.</span><span class="nf">proxy</span> <span class="o">=</span> <span class="n">proxy</span><span class="p">.</span><span class="nf">selenium_proxy</span>

<span class="n">driver</span> <span class="o">=</span> <span class="no">Selenium</span><span class="o">::</span><span class="no">WebDriver</span><span class="p">.</span><span class="nf">for</span> <span class="ss">:firefox</span><span class="p">,</span> <span class="ss">:profile</span> <span class="o">=&gt;</span> <span class="n">profile</span>

<span class="n">proxy</span><span class="p">.</span><span class="nf">new_har</span> <span class="s2">"browsermob"</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">get</span> <span class="s1">'http://yizeng.me/'</span>

<span class="n">har</span> <span class="o">=</span> <span class="n">proxy</span><span class="p">.</span><span class="nf">har</span>
<span class="n">har</span><span class="p">.</span><span class="nf">entries</span><span class="p">.</span><span class="nf">first</span><span class="p">.</span><span class="nf">request</span><span class="p">.</span><span class="nf">url</span>
<span class="n">har</span><span class="p">.</span><span class="nf">save_to</span> <span class="s2">"./browsermob.har"</span>

<span class="n">proxy</span><span class="p">.</span><span class="nf">close</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">quit</span></code></pre></figure> <h2 id="heading-comparison">Comparison</h2> <div class="data-table"> <table border="1"> <tr> <th rowspan="2">Solution</th> <th>GA Admin</th> <th>Server</th> <th>Source code</th> <th>Testing code</th> <th rowspan="2">Pros</th> <th rowspan="2">Cons</th> </tr> <tr> <th colspan="4">Access required</th> </tr> <tr> <td class="center"><a href="#exclude-ip-isp">Exclude IP/ISP</a></td> <td class="center">✔</td> <td class="center"></td> <td class="center"></td> <td class="center"></td> <td>- Straightforward<br/> - No code changes</td> <td>- High maintaining costs for environment using dynamic IP<br/> - May exclude traffic other than Selenium </td> </tr> <tr> <td class="center"><a href="#edit-hosts-file">Edit hosts</a></td> <td class="center"></td> <td class="center">✔</td> <td class="center"></td> <td class="center"></td> <td> - No code changes</td> <td>- Need permissions to setup on testing environment<br/> - May exclude traffic other than Selenium </td> </tr> <tr> <td class="center"><a href="#disable-javascript">Disable JavaScript</a></td> <td class="center"></td> <td class="center"></td> <td class="center"></td> <td class="center">✔</td> <td>- Straightforward<br/> - Accurate </td> <td>- Make Selenium WebDriver barely usable<br/> - Only support few browsers</td> </tr> <tr> <td class="center"><a href="#set-custom-user-agents">Use special UA</a></td> <td class="center"></td> <td class="center"></td> <td class="center">✔</td> <td class="center">✔</td> <td>- Accurate<br/> - Controllable </td> <td>- Source code changes required<br/> - Need to set a custom user agent in Selenium code<br/> - Not possible for IE</td> </tr> <tr> <td class="center"><a href="#opt-out-plugins">Opt-out plugins</a></td> <td class="center"></td> <td class="center"></td> <td class="center"></td> <td class="center">✔</td> <td>- Accurate<br/> - Official </td> <td>- Need to load plugins in Selenium code<br/> - Only possible for Chrome and Firefox</td> </tr> <tr> <td class="center"><a href="#use-a-proxy">Use a proxy</a></td> <td class="center"></td> <td class="center"></td> <td class="center"></td> <td class="center">✔</td> <td>- Accurate<br/> - Regardless of browser types </td> <td>- Need third party libraries<br/> - Need to setup together with Selenium</td> </tr> </table> </div> <div class="footnotes" role="doc-endnotes"> <ol> <li id="fn:1" role="doc-endnote"> <p>IEDriver developer Jim Evans' comment at <a href="https://github.com/seleniumhq/selenium/issues/759">github.com/seleniumhq/selenium/issues/759</a>. <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> <li id="fn:2" role="doc-endnote"> <p>IEDriver developer Jim Evans' comment on <a href="https://groups.google.com/forum/#!topic/webdriver/LAQkirTUWWY">Selenium Mailing List</a>. <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> </ol> </div> </div> </div> </div> <footer class="unit-foot"> <div class="unit-inner unit-foot-inner"> <div class="post-buttons"> <a class="internal gotop" href="#page" title="Back to Top">Back to Top</a> <div class="addthis_toolbox addthis_default_style addthis_32x32_style"> <small class="label">Share Post:</small> <a class="btn-share-post addthis_button_email"></a> <a class="btn-share-post addthis_button_facebook"></a> <a class="btn-share-post addthis_button_google_plusone_share"></a> <a class="btn-share-post addthis_button_reddit"></a> <a class="btn-share-post addthis_button_twitter"></a> </div> <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-53819e27689934f9"></script> </div> <nav class="pagination"> <a class="internal" rel="prev" href="/2016/04/30/work-with-mailchimp-api-3-0s-pagination/" title=" 'Work with MailChimp API 3.0's pagination'"> ← Work with MailChimp API 3.0's pagination</a> <a class="internal" rel="next" href="/2017/01/11/get-a-strava-api-access-token-with-write-permission/" title="Next Post 'Get a Strava API access token with write permission'">Get a Strava API access token with write permission → </a> </nav> </div> </footer> <div class="misc-content"> <script>$(document).ready(function(){var b="ULZ0b9TFdfCUJSKQd4WCKv2v3u25YoG7YG8zXPewkWrT35lZ0Se9YnxLzoV6VM8W";var c="yizeng";var a="link:"+$(".comments .show-hidden").attr("data-disqus-url");$.ajax({type:"GET",url:"//disqus.com/api/3.0/threads/set.jsonp",data:{api_key:b,forum:c,thread:a},cache:false,dataType:"jsonp",success:function(d){if(d.response.length===1){btnText="Show Comments ("+d.response[0].posts+")";$(".comments .show-hidden").html(btnText)}}});$(".comments .show-hidden").on("click",function(){$.ajaxSetup({cache:true});$.getScript("//"+c+".disqus.com/embed.js");$.ajaxSetup({cache:false});$(this).remove()});if(/\#comments/.test(location.hash)){$(".comments .show-hidden").trigger("click")}});</script> <div class="comments"> <button class="center-block show-hidden" title="Show Comments" data-disqus-url="http://yizeng.me/2017/01/08/exclude-your-selenium-webdriver-traffic-from-google-analytics/">Show Comments</button> <div id="disqus_thread"></div> </div> </div> </div> </div> </article> </div> </div> </div> </div> <footer class="the-footer"> <div class="unit-foot"> <div class="unit-inner unit-foot-inner"> <div class="misc vcard"> <div class="about"> <h4><a href="/">About</a></h4> <p>Yi Zeng, a senior software engineer based in Berlin, Germany.</p> <p><small>Theme <a href="https://github.com/yizeng/jekyll-theme-simple-texture" target="_blank">Simple Texture</a> developed by <a href="http://yizeng.me" target="_blank">Yi Zeng</a>, powered by <a href="https://jekyllrb.com/" target="_blank">Jekyll</a>.</small></p> </div> <div class="social-links"> <a class="ico-rss" href="/feed.xml" rel="me" target="_blank" title="feed"></a> <a class="ico-github" href="https://github.com/yizeng/" rel="me" target="_blank" title="github"></a> <a class="ico-linkedin" href="https://www.linkedin.com/in/yizengnz/" rel="me" target="_blank" title="linkedin"></a> <a class="ico-stackoverflow" href="https://stackoverflow.com/users/1177636/yi-zeng" rel="me" target="_blank" title="stackoverflow"></a> </div> </div> </div> </div> <a href="#" class="internal back-to-top">Back to Top</a> </footer> </div> <script>$(document).ready(function(){var c=50,b=500,a=960;$(window).scroll(function(){if($(window).width()>a){if($(this).scrollTop()>c){$("footer").css("top","20px");$("footer .back-to-top").fadeIn(b)}else{$("footer").css("top","auto");$("footer .back-to-top").fadeOut(b)}}});$(window).resize(function(){if($(window).width()<a){$("footer").css("top","auto");$("footer .back-to-top").fadeOut(b)}if($(window).width()>=a&&$(this).scrollTop()>c){$("footer").css("top","20px");$("footer .back-to-top").fadeIn(b)}});$("footer .back-to-top, .gotop").on("click",function(d){d.preventDefault();$("html, body").animate({scrollTop:0},b);return false});$(".show-hidden").on("click",function(){$(this).parent().next().toggleClass("hidden");$(this).toggleClass("hidden")})});</script> <script src="/assets/javascripts/jekyll-search.jquery.js"></script> <script>$(document).ready(function(){$(".search-field").simpleJekyllSearch({jsonFile:"/search.json",template:'<li><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></li>',searchResults:".search-wrapper .results",searchResultsTitle:"<h4>Search results</h4>",noResults:"<p>Oh shucks<br/><small>Nothing found :(</small></p>"})});(function(c,b,d){var a=function(){c(".nav-wrapper, .search-wrapper").removeAttr("style");c(".nav-form, .search-form").removeClass("active");c("body").removeClass("nav-overlay search-overlay")};c(".nav-global .btn-search").on("click",function(){c(".search-wrapper").css({display:"block"});c(".search-form").addClass("active");c(".search-form").find("input").focus();c("body").addClass("search-overlay")});c(".nav-global .btn-menu").on("click",function(){c(".nav-wrapper").css({display:"block"});c(".nav-form").addClass("active");c(".nav-form .search-field").prop("disabled",true);c("body").addClass("nav-overlay")});c(".nav-wrapper .btn-close, .search-wrapper .btn-close").on("click",function(){a()});c(document).on("keyup",function(f){if(f.keyCode===27){a()}})})(jQuery,window);</script> <script src='//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.js'></script> <script src='//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-buttons.min.js'></script> <script src="/assets/javascripts/unveil/jquery.unveil.min.js"></script> <script>window.jQuery.fancybox||document.write('<script src="/assets/javascripts/fancybox/jquery.fancybox.pack.js?v=2.1.4"><\/script>');window.jQuery.fancybox.helpers.buttons||document.write('<script src="/assets/javascripts/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"><\/script>');</script> <script>$("head").append('<link rel="stylesheet" href="/assets/javascripts/fancybox/jquery.fancybox.css?v=2.1.4" type="text/css" />');$("head").append('<link rel="stylesheet" href="/assets/javascripts/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" />');$(".post-image").fancybox({prevEffect:"none",nextEffect:"none",closeBtn:true,helpers:{title:{type:"float"}}});$(document).ready(function(){$(".post-image > img").unveil(450)});</script> </body> </html>