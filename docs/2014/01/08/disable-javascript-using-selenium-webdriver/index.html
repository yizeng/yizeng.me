<!DOCTYPE html> <!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]--> <!--[if IE 7]><html class="no-js lt-ie9 lt-ie8"><![endif]--> <!--[if IE 8]><html class="no-js lt-ie9"><![endif]--> <!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]--> <head> <meta charset="utf-8"> <!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><![endif]--> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Disable JavaScript using Selenium WebDriver | Yi Zeng’s Blog</title> <meta name="generator" content="Jekyll v3.9.3"/> <meta property="og:title" content="Disable JavaScript using Selenium WebDriver"/> <meta name="author" content="Yi Zeng"/> <meta property="og:locale" content="en"/> <meta name="description" content="How to disable JavaScript in browsers like Chrome, Firefox, IE and PhantomJS using Selenium WebDriver Ruby binding."/> <meta property="og:description" content="How to disable JavaScript in browsers like Chrome, Firefox, IE and PhantomJS using Selenium WebDriver Ruby binding."/> <link rel="canonical" href="http://yizeng.me/2014/01/08/disable-javascript-using-selenium-webdriver/"/> <meta property="og:url" content="http://yizeng.me/2014/01/08/disable-javascript-using-selenium-webdriver/"/> <meta property="og:site_name" content="Yi Zeng’s Blog"/> <meta property="og:type" content="article"/> <meta property="article:published_time" content="2014-01-08T00:00:00+01:00"/> <meta name="twitter:card" content="summary"/> <meta property="twitter:title" content="Disable JavaScript using Selenium WebDriver"/> <script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Yi Zeng"},"dateModified":"2014-01-08T00:00:00+01:00","datePublished":"2014-01-08T00:00:00+01:00","description":"How to disable JavaScript in browsers like Chrome, Firefox, IE and PhantomJS using Selenium WebDriver Ruby binding.","headline":"Disable JavaScript using Selenium WebDriver","mainEntityOfPage":{"@type":"WebPage","@id":"http://yizeng.me/2014/01/08/disable-javascript-using-selenium-webdriver/"},"url":"http://yizeng.me/2014/01/08/disable-javascript-using-selenium-webdriver/"}</script> <meta name="keywords" content="ruby,selenium webdriver"/> <link type="application/atom+xml" rel="alternate" href="http://yizeng.me/feed.xml" title="Yi Zeng’s Blog"/> <link href='/assets/stylesheets/blog.css' rel="stylesheet" type="text/css"> <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script> <script>window.Modernizr||document.write('<script src="/assets/javascripts/modernizr-2.8.3.min.js"><\/script>');</script> <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> <script>window.jQuery||document.write('<script src="/assets/javascripts/jquery-3.3.1.min.js"><\/script>');</script> <script src="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script> <script>window.Pace||document.write('<script src="/assets/javascripts/pace.min.js"><\/script>');</script> <script>(function(b,m,h,a,g){b[a]=b[a]||[];b[a].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var k=m.getElementsByTagName(h)[0],e=m.createElement(h),c=a!="dataLayer"?"&l="+a:"";e.async=true;e.src="https://www.googletagmanager.com/gtm.js?id="+g+c;k.parentNode.insertBefore(e,k)})(window,document,"script","dataLayer","GTM-P5NFP45");</script> </head> <body> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P5NFP45" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> <!--[if IE]><p class="site-notice">You are using an outdated browser. Please <a href="http://browsehappy.com/" target="_blank">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true" target="_blank">activate Google Chrome Frame</a> to improve your experience.</p><![endif]--> <noscript> <p class="site-notice">This site requires JavaScript. Here are the instructions <a href="http://www.enable-javascript.com/" target="_blank">how to enable JavaScript in your web browser</a>.</p> </noscript> <div class="nav-wrapper overlay-wrapper"> <div class="nav-form overlay-form"> <span class="overlay-header menu">Menu</span> <a class="btn-close">Close</a> <div class="results"> <ul> <li><a href="/blog/categories/">Categories</a></li> <li><a href="/blog/tags/">Tags</a></li> <li><a href="/">About</a></li> </ul> </div> </div> </div> <div class="search-wrapper overlay-wrapper"> <div class="search-form overlay-form"> <input type="text" class="overlay-header search-field" placeholder="Search..."> <a class="btn-close">Close</a> <ul class="results"></ul> </div> </div> <div id="page" class="hentry"> <header class="the-header"> <div class="unit-head"> <div class="unit-inner unit-head-inner"> <nav class="nav-global"> <ul> <li class="logo nav-link"> <button class="btn-menu" title="Menu"></button> <a href="/blog/">Yi Zeng’s Blog</a> <!--[if !IE]>--> <button class="btn-search" title="Search"></button> <!--<![endif]--> </li> <li class="nav-link"><a title="Categories" href="/blog/categories/">Categories</a></li> <li class="nav-link"><a title="Tags" href="/blog/tags/">Tags</a></li> <!--[if !IE]>--> <li class="nav-link"><a title="Search" class="btn-search" href="#">Search</a></li> <!--<![endif]--> </ul> </nav> </div> </div> </header> <div class="body animated fadeInDown" role="main"> <div class="unit-body"> <div class="unit-inner unit-body-inner"> <div class="entry-content"> <article class="unit-article layout-post"> <div class="unit-inner unit-article-inner"> <div itemscope itemtype="http://schema.org/Article" class="content"> <header> <div class="unit-head"> <div class="unit-inner unit-head-inner"> <h1 class="entry-title" itemprop="name">Disable JavaScript using Selenium WebDriver</h1> </div> </div> </header> <div class="bd article-content"> <div class="entry-content"> <div class="meta"> <p class="date-publish"> Published: <time itemprop="datePublished" class="date-pub " title="2014-01-08T00:00:00+01:00" datetime="2014-01-08T00:00:00+01:00">January 08, 2014 </time> by <a class="author" href="/" rel="author" title="Show Author"> <span itemprop="author" itemscope itemtype="http://schema.org/Person"> <span itemprop="name">Yi Zeng</span> </span> </a> <a class="license-icon" rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" title="Show License"> <img alt="Creative Commons Licence" style="border-width:0" src="/assets/images/theme/cc-by-sa.png" height="16" width="80"/> </a> (Last updated: <time class="date-updated updated" title="2014-04-20T00:00:00+02:00" datetime="2014-04-20T00:00:00+02:00">April 20, 2014</time>) </p> <ul class="list-category list-linear"> <li class="list-head">Categories: </li> <li> <a href="/blog/categories/#tutorials" title="tutorials"> tutorials <span>26</span></a> </li> </ul> <ul class="list-tag list-linear"> <li class="list-head">Tags: </li> <li> <a href="/blog/tags/#ruby" title="ruby">ruby <span>14</span></a> </li> <li> <a href="/blog/tags/#selenium-webdriver" title="selenium webdriver">selenium webdriver <span>16</span></a> </li> </ul> </div> <div itemprop="articleBody"> <p>Selenium WebDriver is a web automation framework relies heavily on <a href="https://github.com/SeleniumHQ/selenium/wiki/Automation-Atoms">Automation Atoms</a>, which are implemented as JavaScript functions for execution within the browser. Therefore, disabling JavaScript has never been an intended use case in Selenium WebDriver, which might break drivers' functionality and cause unexpected behaviours.</p> <p>Nevertheless, for whatever the reason is, there are still some developers have been asking how to start browsers using Selenium WebDriver with JavaScript disabled. This article shows a few examples on how to disable JavaScript in Chrome, Firefox, IE and PhantomJS using Selenium WebDriver Ruby binding.</p> <ul class="toc" id="markdown-toc"> <li><a href="#heading-chrome" id="markdown-toc-heading-chrome">Chrome</a> <ul> <li><a href="#heading-chromedriver-with-chrome-28-or-under" id="markdown-toc-heading-chromedriver-with-chrome-28-or-under">ChromeDriver (with Chrome 28 or under)</a></li> <li><a href="#heading-chromedriver2-with-chrome-29-or-above" id="markdown-toc-heading-chromedriver2-with-chrome-29-or-above">ChromeDriver2 (with Chrome 29 or above)</a></li> </ul> </li> <li><a href="#heading-firefox" id="markdown-toc-heading-firefox">Firefox</a></li> <li><a href="#heading-ie" id="markdown-toc-heading-ie">IE</a></li> <li><a href="#heading-phantomjs" id="markdown-toc-heading-phantomjs">PhantomJS</a></li> </ul> <h2 id="heading-chrome">Chrome</h2> <h3 id="heading-chromedriver-with-chrome-28-or-under">ChromeDriver (with Chrome 28 or under)</h3> <p>Disabling JavaScript in Chrome is possible with old ChromeDriver prior to ChromeDriver2, which only supports Chrome 28 or under.</p> <figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># Environment tested</span>
<span class="c1"># Windows 7, Chrome 28, ChromeDriver 26.0.1383.0, Selenium 2.39.0</span>

<span class="nb">require</span> <span class="s1">'selenium-webdriver'</span>

<span class="n">driver</span> <span class="o">=</span> <span class="no">Selenium</span><span class="o">::</span><span class="no">WebDriver</span><span class="p">.</span><span class="nf">for</span> <span class="ss">:chrome</span><span class="p">,</span> <span class="ss">:switches</span> <span class="o">=&gt;</span> <span class="sx">%w[--disable-javascript]</span></code></pre></figure> <h3 id="heading-chromedriver2-with-chrome-29-or-above">ChromeDriver2 (with Chrome 29 or above)</h3> <p>The above method no longer works for ChromeDriver2, and it will not be fixed as ChromeDriver should have JavaScript enabled to work properly in the first place.</p> <p>Here are quotes from <a href="https://github.com/seleniumhq/selenium-google-code-issue-archive/issues/3175">Issue 3175</a> and <a href="https://github.com/seleniumhq/selenium-google-code-issue-archive/issues/6672">Issue 6672</a>:</p> <blockquote> <p>WARNING: Running without JavaScript is unsupported and will likely break a large portion of the ChromeDriver's functionality. I suspect you will be able to do little more than navigate to a page. This is NOT a supported use case, and we will not be supporting it.</p> <p>Closing this as WontFix - the ChromeDriver (and every other WebDriver implementation I'm aware of) require JavaScript to function.</p> </blockquote> <h2 id="heading-firefox">Firefox</h2> <p>JavaScript can be disabled from <code class="language-plaintext highlighter-rouge">javascript.enabled</code> preference in Firefox's <a href="http://kb.mozillazine.org/About:config">about:config</a> page. Here is how to achieve it using Selenium WebDriver Ruby binding.</p> <figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># Environment tested</span>
<span class="c1"># Linux Mint 16, Firefox 28, Selenium 2.41.0</span>

<span class="nb">require</span> <span class="s1">'selenium-webdriver'</span>

<span class="n">profile</span> <span class="o">=</span> <span class="no">Selenium</span><span class="o">::</span><span class="no">WebDriver</span><span class="o">::</span><span class="no">Firefox</span><span class="o">::</span><span class="no">Profile</span><span class="p">.</span><span class="nf">new</span>
<span class="n">profile</span><span class="p">[</span><span class="s2">"javascript.enabled"</span><span class="p">]</span> <span class="o">=</span> <span class="kp">false</span>

<span class="n">driver</span> <span class="o">=</span> <span class="no">Selenium</span><span class="o">::</span><span class="no">WebDriver</span><span class="p">.</span><span class="nf">for</span> <span class="ss">:firefox</span><span class="p">,</span> <span class="ss">:profile</span> <span class="o">=&gt;</span> <span class="n">profile</span></code></pre></figure> <h2 id="heading-ie">IE</h2> <p>Unfortunately, this is also not possible in IEDriver.</p> <p>Setting capability <code class="language-plaintext highlighter-rouge">javascriptEnabled</code> to <code class="language-plaintext highlighter-rouge">false</code> will not result in any exceptions, but, it doesn't mean the browser can be started with this capability. Selenium is designed to ignore capabilities that are not supported by the requested browser. <a href="https://github.com/SeleniumHQ/selenium/wiki/DesiredCapabilities#read-write-capabilities">DesiredCapabilities wiki page</a> states <code class="language-plaintext highlighter-rouge">javascriptEnabled</code> capability only works on headless HTMLUnitDriver.</p> <p>A quote from IEDriver's developer in <a href="http://stackoverflow.com/a/17292038/1177636">this StackOverflow answer</a>:</p> <blockquote> <p>You can't disable JavaScript in the IE driver.</p> <p>Furthermore, much of the functionality of the IE driver (and indeed all drivers at present) is implemented in JavaScript. That means disabling JavaScript would render large parts of the IE driver (and indeed all drivers at present) useless.</p> </blockquote> <h2 id="heading-phantomjs">PhantomJS</h2> <p>It is possible to disable JavaScript completely in PhantomJS using <code class="language-plaintext highlighter-rouge">javascriptEnabled</code> setting in its <a href="https://github.com/ariya/phantomjs/wiki/API-Reference-WebPage#settings-object">API</a> reference. Once again, this prevents all JavaScript from execution, including those needed by Selenium WebDriver itself.</p> <figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># Environment tested</span>
<span class="c1"># Linux Mint 16, PhantomJS 1.9.7, Selenium 2.41.0</span>

<span class="nb">require</span> <span class="s1">'selenium-webdriver'</span>

<span class="n">capabilities</span> <span class="o">=</span> <span class="no">Selenium</span><span class="o">::</span><span class="no">WebDriver</span><span class="o">::</span><span class="no">Remote</span><span class="o">::</span><span class="no">Capabilities</span><span class="p">.</span><span class="nf">phantomjs</span><span class="p">(</span><span class="s2">"phantomjs.page.settings.javascriptEnabled"</span> <span class="o">=&gt;</span> <span class="s2">"false"</span><span class="p">)</span>
<span class="n">driver</span> <span class="o">=</span> <span class="no">Selenium</span><span class="o">::</span><span class="no">WebDriver</span><span class="p">.</span><span class="nf">for</span> <span class="ss">:phantomjs</span><span class="p">,</span> <span class="ss">:desired_capabilities</span> <span class="o">=&gt;</span> <span class="n">capabilities</span></code></pre></figure> </div> </div> </div> <footer class="unit-foot"> <div class="unit-inner unit-foot-inner"> <div class="post-buttons"> <a class="internal gotop" href="#page" title="Back to Top">Back to Top</a> <div class="addthis_toolbox addthis_default_style addthis_32x32_style"> <small class="label">Share Post:</small> <a class="btn-share-post addthis_button_email"></a> <a class="btn-share-post addthis_button_facebook"></a> <a class="btn-share-post addthis_button_google_plusone_share"></a> <a class="btn-share-post addthis_button_reddit"></a> <a class="btn-share-post addthis_button_twitter"></a> </div> <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-53819e27689934f9"></script> </div> <nav class="pagination"> <a class="internal" rel="prev" href="/2013/11/17/run-selenium-webdriver-ui-tests-against-jekyll-site-on-travis-ci/" title=" 'Run Selenium WebDriver UI tests against a Jekyll site on Travis CI'"> ← Run Selenium WebDriver UI tests against a Jekyll site on Travis CI</a> <a class="internal" rel="next" href="/2014/01/31/test-wysiwyg-editors-using-selenium-webdriver/" title="Next Post 'Test WYSIWYG editors using Selenium WebDriver'">Test WYSIWYG editors using Selenium WebDriver → </a> </nav> </div> </footer> <div class="misc-content"> <script>$(document).ready(function(){var b="ULZ0b9TFdfCUJSKQd4WCKv2v3u25YoG7YG8zXPewkWrT35lZ0Se9YnxLzoV6VM8W";var c="yizeng";var a="link:"+$(".comments .show-hidden").attr("data-disqus-url");$.ajax({type:"GET",url:"//disqus.com/api/3.0/threads/set.jsonp",data:{api_key:b,forum:c,thread:a},cache:false,dataType:"jsonp",success:function(d){if(d.response.length===1){btnText="Show Comments ("+d.response[0].posts+")";$(".comments .show-hidden").html(btnText)}}});$(".comments .show-hidden").on("click",function(){$.ajaxSetup({cache:true});$.getScript("//"+c+".disqus.com/embed.js");$.ajaxSetup({cache:false});$(this).remove()});if(/\#comments/.test(location.hash)){$(".comments .show-hidden").trigger("click")}});</script> <div class="comments"> <button class="center-block show-hidden" title="Show Comments" data-disqus-url="http://yizeng.me/2014/01/08/disable-javascript-using-selenium-webdriver/">Show Comments</button> <div id="disqus_thread"></div> </div> </div> </div> </div> </article> </div> </div> </div> </div> <footer class="the-footer"> <div class="unit-foot"> <div class="unit-inner unit-foot-inner"> <div class="misc vcard"> <div class="about"> <h4><a href="/">About</a></h4> <p>Yi Zeng, a senior software engineer based in Berlin, Germany.</p> <p><small>Theme <a href="https://github.com/yizeng/jekyll-theme-simple-texture" target="_blank">Simple Texture</a> developed by <a href="http://yizeng.me" target="_blank">Yi Zeng</a>, powered by <a href="https://jekyllrb.com/" target="_blank">Jekyll</a>.</small></p> </div> <div class="social-links"> <a class="ico-rss" href="/feed.xml" rel="me" target="_blank" title="feed"></a> <a class="ico-github" href="https://github.com/yizeng/" rel="me" target="_blank" title="github"></a> <a class="ico-linkedin" href="https://www.linkedin.com/in/yizengnz/" rel="me" target="_blank" title="linkedin"></a> <a class="ico-stackoverflow" href="https://stackoverflow.com/users/1177636/yi-zeng" rel="me" target="_blank" title="stackoverflow"></a> </div> </div> </div> </div> <a href="#" class="internal back-to-top">Back to Top</a> </footer> </div> <script>$(document).ready(function(){var c=50,b=500,a=960;$(window).scroll(function(){if($(window).width()>a){if($(this).scrollTop()>c){$("footer").css("top","20px");$("footer .back-to-top").fadeIn(b)}else{$("footer").css("top","auto");$("footer .back-to-top").fadeOut(b)}}});$(window).resize(function(){if($(window).width()<a){$("footer").css("top","auto");$("footer .back-to-top").fadeOut(b)}if($(window).width()>=a&&$(this).scrollTop()>c){$("footer").css("top","20px");$("footer .back-to-top").fadeIn(b)}});$("footer .back-to-top, .gotop").on("click",function(d){d.preventDefault();$("html, body").animate({scrollTop:0},b);return false});$(".show-hidden").on("click",function(){$(this).parent().next().toggleClass("hidden");$(this).toggleClass("hidden")})});</script> <script src="/assets/javascripts/jekyll-search.jquery.js"></script> <script>$(document).ready(function(){$(".search-field").simpleJekyllSearch({jsonFile:"/search.json",template:'<li><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></li>',searchResults:".search-wrapper .results",searchResultsTitle:"<h4>Search results</h4>",noResults:"<p>Oh shucks<br/><small>Nothing found :(</small></p>"})});(function(c,b,d){var a=function(){c(".nav-wrapper, .search-wrapper").removeAttr("style");c(".nav-form, .search-form").removeClass("active");c("body").removeClass("nav-overlay search-overlay")};c(".nav-global .btn-search").on("click",function(){c(".search-wrapper").css({display:"block"});c(".search-form").addClass("active");c(".search-form").find("input").focus();c("body").addClass("search-overlay")});c(".nav-global .btn-menu").on("click",function(){c(".nav-wrapper").css({display:"block"});c(".nav-form").addClass("active");c(".nav-form .search-field").prop("disabled",true);c("body").addClass("nav-overlay")});c(".nav-wrapper .btn-close, .search-wrapper .btn-close").on("click",function(){a()});c(document).on("keyup",function(f){if(f.keyCode===27){a()}})})(jQuery,window);</script> <script src='//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.js'></script> <script src='//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-buttons.min.js'></script> <script src="/assets/javascripts/unveil/jquery.unveil.min.js"></script> <script>window.jQuery.fancybox||document.write('<script src="/assets/javascripts/fancybox/jquery.fancybox.pack.js?v=2.1.4"><\/script>');window.jQuery.fancybox.helpers.buttons||document.write('<script src="/assets/javascripts/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"><\/script>');</script> <script>$("head").append('<link rel="stylesheet" href="/assets/javascripts/fancybox/jquery.fancybox.css?v=2.1.4" type="text/css" />');$("head").append('<link rel="stylesheet" href="/assets/javascripts/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" />');$(".post-image").fancybox({prevEffect:"none",nextEffect:"none",closeBtn:true,helpers:{title:{type:"float"}}});$(document).ready(function(){$(".post-image > img").unveil(450)});</script> </body> </html>